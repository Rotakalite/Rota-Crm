/*! For license information please see main.0bae8250.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,n)=>{var r=n(853),i=n(43),a=n(950);function s(e){var t="https://53980ca9-c304-433e-ab62-1c37a7176dd5.preview.emergentagent.com",REACT_APP_CLERK_PUBLISHABLE_KEY:"pk_test_YWRhcHRpbmctZWZ0LTYuY2xlcmsuYWNjb3VudHMuZGV2JA"}).filter((e=>e.startsWith("REACT_APP"))));const Jf=()=>{const{user:e,isLoaded:t}=ui(),{session:n}=di(),[r,i]=(0,a.useState)(null),[s,o]=(0,a.useState)(null),[l,c]=(0,a.useState)(null);return(0,a.useEffect)((()=>{(async()=>{if(t&&e&&n)try{var r;const t=(null===(r=e.publicMetadata)||void 0===r?void 0:r.role)||"client";o(t),console.log("\ud83d\udd0d Clerk Role:",t),console.log("\u2705 Set role to:",t);try{const r=await n.getToken();i(r),console.log("\ud83c\udfaf Token received successfully");try{const e=await Tt.get("".concat(Xf,"/auth/me"),{headers:{Authorization:"Bearer ".concat(r)}});c(e.data),console.log("\u2705 User found in database")}catch(h){var a;console.log("\u26a0\ufe0f User not found, trying to register...",null===(a=h.response)||void 0===a?void 0:a.status);try{var s;const n=await Tt.post("".concat(Xf,"/auth/register"),{clerk_user_id:e.id,email:(null===(s=e.primaryEmailAddress)||void 0===s?void 0:s.emailAddress)||"",name:e.fullName||e.firstName||"User",role:t},{headers:{Authorization:"Bearer ".concat(r)}});c(n.data),console.log("\u2705 User registered in database")}catch(f){var l;console.log("\u26a0\ufe0f Registration failed, continuing without DB user:",null===(l=f.response)||void 0===l?void 0:l.status)}}}catch(p){console.error("Token error:",p),console.log("\ud83c\udfaf Setting role without token"),o(t)}}catch(m){var u;console.error("Auth initialization error:",m);const t=(null===(u=e.publicMetadata)||void 0===u?void 0:u.role)||"client";o(t)}else if(t&&e){var d;const t=(null===(d=e.publicMetadata)||void 0===d?void 0:d.role)||"client";o(t),console.log("\ud83c\udfaf No session, setting role without token:",t)}})()}),[e,t,n]),{user:e,authToken:r,userRole:s,dbUser:l,isLoaded:t,refreshUser:async()=>{if(r)try{const e=await Tt.get("".concat(Xf,"/auth/me"),{headers:{Authorization:"Bearer ".concat(r)}});c(e.data),console.log("\u2705 User data refreshed:",e.data)}catch(e){console.error("Error refreshing user:",e)}}}},Zf=()=>{var e;const{user:t}=ui(),{signOut:n}=di(),{userRole:r}=Jf();return(0,Gf.jsx)("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:(0,Gf.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Gf.jsxs)("div",{children:[(0,Gf.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"\ud83c\udf3f S\xfcrd\xfcr\xfclebilir Turizm CRM"}),(0,Gf.jsx)("p",{className:"text-sm text-gray-600",children:"admin"===r?"Admin Paneli":"M\xfc\u015fteri Paneli"})]}),(0,Gf.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Gf.jsxs)("div",{className:"text-right",children:[(0,Gf.jsx)("p",{className:"font-semibold text-gray-800",children:(null===t||void 0===t?void 0:t.fullName)||(null===t||void 0===t?void 0:t.firstName)}),(0,Gf.jsx)("p",{className:"text-sm text-gray-600",children:null===t||void 0===t||null===(e=t.primaryEmailAddress)||void 0===e?void 0:e.emailAddress}),(0,Gf.jsx)("span",{className:"inline-block px-2 py-1 text-xs rounded-full ".concat("admin"===r?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"),children:"admin"===r?"Admin":"M\xfc\u015fteri"})]}),(0,Gf.jsx)("button",{onClick:()=>{localStorage.removeItem("client_setup_".concat(r,"_completed")),n()},className:"bg-red-600 text-white px-4 py-2 rounded-md hover:bg-red-700 transition-colors",children:"\xc7\u0131k\u0131\u015f Yap"})]})]})})},ep=()=>{const[e,t]=(0,a.useState)(null),[n,r]=(0,a.useState)(null),[i,s]=(0,a.useState)([]),[o,l]=(0,a.useState)(""),[c,u]=(0,a.useState)(2024),[d,h]=(0,a.useState)(2023),[f,p]=(0,a.useState)(!1),[m,g]=(0,a.useState)("yearly"),{authToken:b,userRole:y,dbUser:v}=Jf();(0,a.useEffect)((()=>{"admin"===y?x():"client"===y&&null!==v&&void 0!==v&&v.client_id&&l(v.client_id)}),[b,y,v]),(0,a.useEffect)((()=>{(o||"client"===y)&&(k(),w())}),[b,c,d,o]);const x=async()=>{if(b&&"admin"===y)try{console.log("\ud83d\udd0d Fetching clients with token:",b.substring(0,20)+"...");const e=await Tt.get("".concat(Xf,"/clients"),{headers:{Authorization:"Bearer ".concat(b)}});s(Array.isArray(e.data)?e.data:[]),console.log("\u2705 Clients fetched successfully:",e.data.length,"clients"),e.data&&e.data.length>0&&(l(e.data[0].id),console.log("\ud83c\udfaf Auto-selected first client:",e.data[0].hotel_name))}catch(r){var e,t,n;console.error("\u274c Error fetching clients:",null===(e=r.response)||void 0===e?void 0:e.status,null===(t=r.response)||void 0===t?void 0:t.data),s([]),403===(null===(n=r.response)||void 0===n?void 0:n.status)&&(console.log("\ud83d\udd04 Retrying clients fetch in 2 seconds..."),setTimeout((()=>{x()}),2e3))}else console.log("\u274c No auth token or not admin for clients fetch")},k=async()=>{if(b){p(!0);try{const e="admin"===y?o:null===v||void 0===v?void 0:v.client_id;if(!e)return;console.log("\ud83d\udd0d Fetching analytics for client: ".concat(e,", year: ").concat(c));const n=await Tt.get("".concat(Xf,"/consumptions/analytics?year=").concat(c,"&client_id=").concat(e),{headers:{Authorization:"Bearer ".concat(b)}});t(n.data),console.log("\u2705 Analytics data fetched:",n.data)}catch(r){var e,n;console.error("\u274c Error fetching analytics:",null===(e=r.response)||void 0===e?void 0:e.status,null===(n=r.response)||void 0===n?void 0:n.data)}finally{p(!1)}}else console.log("\u274c No auth token available for analytics")},w=async()=>{if(b)try{console.log("\ud83d\udd0d Fetching monthly trends with token:",b.substring(0,20)+"...");const e=await Tt.get("".concat(Xf,"/analytics/monthly-trends?year=").concat(c),{headers:{Authorization:"Bearer ".concat(b)}});r(e.data),console.log("\u2705 Monthly trends fetched:",e.data)}catch(n){var e,t;console.error("\u274c Error fetching monthly trends:",null===(e=n.response)||void 0===e?void 0:e.status,null===(t=n.response)||void 0===t?void 0:t.data)}else console.log("\u274c No auth token for monthly trends")},_=()=>{if(!e)return null;const t=e.monthly_comparison.map((e=>e.month_name)),n=e.monthly_comparison.map((e=>e.current_year.electricity)),r=e.monthly_comparison.map((e=>e.previous_year.electricity)),i=e.monthly_comparison.map((e=>e.current_year.water)),a=e.monthly_comparison.map((e=>e.previous_year.water));return{labels:t,datasets:[{label:"".concat(c," Elektrik (kWh)"),data:n,borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.1},{label:"".concat(c-1," Elektrik (kWh)"),data:r,borderColor:"rgb(156, 163, 175)",backgroundColor:"rgba(156, 163, 175, 0.1)",tension:.1},{label:"".concat(c," Su (m\xb3)"),data:i,borderColor:"rgb(34, 197, 94)",backgroundColor:"rgba(34, 197, 94, 0.1)",tension:.1},{label:"".concat(c-1," Su (m\xb3)"),data:a,borderColor:"rgb(107, 114, 128)",backgroundColor:"rgba(107, 114, 128, 0.1)",tension:.1}]}},S=()=>{if(!e)return null;return{labels:[c-1,c],datasets:[{label:"Elektrik (kWh)",data:[e.yearly_totals.previous_year.electricity,e.yearly_totals.current_year.electricity],backgroundColor:"rgba(59, 130, 246, 0.8)",borderColor:"rgb(59, 130, 246)",borderWidth:1},{label:"Su (m\xb3)",data:[e.yearly_totals.previous_year.water,e.yearly_totals.current_year.water],backgroundColor:"rgba(34, 197, 94, 0.8)",borderColor:"rgb(34, 197, 94)",borderWidth:1},{label:"Do\u011falgaz (m\xb3)",data:[e.yearly_totals.previous_year.natural_gas,e.yearly_totals.current_year.natural_gas],backgroundColor:"rgba(251, 191, 36, 0.8)",borderColor:"rgb(251, 191, 36)",borderWidth:1}]}},j={responsive:!0,plugins:{legend:{position:"top"},title:{display:!0,text:"T\xfcketim Analizi"}},scales:{y:{beginAtZero:!0}}};return f?(0,Gf.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,Gf.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600"})}):(0,Gf.jsxs)("div",{className:"space-y-6",children:[(0,Gf.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Gf.jsxs)("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center mb-4",children:[(0,Gf.jsxs)("h2",{className:"text-2xl font-bold text-gray-800 mb-4 md:mb-0",children:["\ud83d\udcca ",(()=>{if("client"===y)return(null===v||void 0===v?void 0:v.name)||"M\xfc\u015fteri";const e=i.find((e=>e.id===o));return e?e.hotel_name:"M\xfc\u015fteri Se\xe7in"})()," - T\xfcketim Analizi"]}),(0,Gf.jsxs)("div",{className:"flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-4",children:["admin"===y&&(0,Gf.jsxs)("div",{className:"flex space-x-2",children:[(0,Gf.jsxs)("select",{value:o,onChange:e=>l(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,Gf.jsx)("option",{value:"",children:"M\xfc\u015fteri Se\xe7in"}),i.map((e=>(0,Gf.jsx)("option",{value:e.id,children:e.hotel_name},e.id)))]}),(0,Gf.jsx)("button",{onClick:x,className:"px-3 py-2 bg-gray-500 text-white rounded-md hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-gray-500",title:"M\xfc\u015fteri listesini yenile",children:"\ud83d\udd04"})]}),(0,Gf.jsx)("select",{value:c,onChange:e=>u(parseInt(e.target.value)),className:"px-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:Array.from({length:5},((e,t)=>(new Date).getFullYear()-t)).map((e=>(0,Gf.jsx)("option",{value:e,children:e},e)))})]})]}),(0,Gf.jsxs)("div",{className:"flex flex-wrap space-x-2 mb-4",children:[(0,Gf.jsx)("button",{onClick:()=>g("yearly"),className:"px-4 py-2 rounded-md transition-colors ".concat("yearly"===m?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Ayl\u0131k Kar\u015f\u0131la\u015ft\u0131rma"}),(0,Gf.jsx)("button",{onClick:()=>g("trends"),className:"px-4 py-2 rounded-md transition-colors ".concat("trends"===m?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"),children:"Y\u0131ll\u0131k Kar\u015f\u0131la\u015ft\u0131rma"})]})]}),"yearly"===m&&e&&(0,Gf.jsxs)("div",{className:"space-y-6",children:[(0,Gf.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,Gf.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md border-l-4 border-blue-500",children:[(0,Gf.jsxs)("h3",{className:"text-lg font-semibold text-blue-700 mb-2",children:["Toplam Elektrik (",c,")"]}),(0,Gf.jsxs)("p",{className:"text-3xl font-bold text-blue-900",children:[e.yearly_totals.current_year.electricity.toLocaleString()," kWh"]}),(0,Gf.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[c-1,": ",e.yearly_totals.previous_year.electricity.toLocaleString()," kWh"]})]}),(0,Gf.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md border-l-4 border-green-500",children:[(0,Gf.jsxs)("h3",{className:"text-lg font-semibold text-green-700 mb-2",children:["Toplam Su (",c,")"]}),(0,Gf.jsxs)("p",{className:"text-3xl font-bold text-green-900",children:[e.yearly_totals.current_year.water.toLocaleString()," m\xb3"]}),(0,Gf.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[c-1,": ",e.yearly_totals.previous_year.water.toLocaleString()," m\xb3"]})]}),(0,Gf.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md border-l-4 border-yellow-500",children:[(0,Gf.jsx)("h3",{className:"text-lg font-semibold text-yellow-700 mb-2",children:"Ki\u015fi Ba\u015f\u0131 Elektrik"}),(0,Gf.jsxs)("p",{className:"text-3xl font-bold text-yellow-900",children:[e.yearly_per_person.current_year.electricity.toFixed(1)," kWh"]}),(0,Gf.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[c-1,": ",e.yearly_per_person.previous_year.electricity.toFixed(1)," kWh"]})]}),(0,Gf.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md border-l-4 border-purple-500",children:[(0,Gf.jsx)("h3",{className:"text-lg font-semibold text-purple-700 mb-2",children:"Ki\u015fi Ba\u015f\u0131 Su"}),(0,Gf.jsxs)("p",{className:"text-3xl font-bold text-purple-900",children:[e.yearly_per_person.current_year.water.toFixed(1)," m\xb3"]}),(0,Gf.jsxs)("p",{className:"text-sm text-gray-600 mt-1",children:[c-1,": ",e.yearly_per_person.previous_year.water.toFixed(1)," m\xb3"]})]})]}),(0,Gf.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Gf.jsxs)("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:[c," vs ",c-1," Ayl\u0131k T\xfcketim Kar\u015f\u0131la\u015ft\u0131rmas\u0131"]}),_()&&(0,Gf.jsx)(Yf,{data:_(),options:j})]})]}),"trends"===m&&e&&(0,Gf.jsxs)("div",{className:"space-y-6",children:[(0,Gf.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Gf.jsxs)("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:["Y\u0131ll\u0131k T\xfcketim Kar\u015f\u0131la\u015ft\u0131rmas\u0131 (",c-1," vs ",c,")"]}),S()&&(0,Gf.jsx)($f,{data:S(),options:j})]}),e&&(0,Gf.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Gf.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-4",children:"De\u011fi\u015fim Analizi"}),(0,Gf.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,Gf.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,Gf.jsx)("h4",{className:"font-semibold text-blue-700",children:"Elektrik De\u011fi\u015fimi"}),(0,Gf.jsxs)("p",{className:"text-2xl font-bold text-blue-900",children:[((e.yearly_totals.current_year.electricity-e.yearly_totals.previous_year.electricity)/e.yearly_totals.previous_year.electricity*100).toFixed(1),"%"]}),(0,Gf.jsx)("p",{className:"text-sm text-gray-600",children:e.yearly_totals.current_year.electricity>e.yearly_totals.previous_year.electricity?"\u2197\ufe0f Art\u0131\u015f":"\u2198\ufe0f Azal\u0131\u015f"})]}),(0,Gf.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,Gf.jsx)("h4",{className:"font-semibold text-green-700",children:"Su De\u011fi\u015fimi"}),(0,Gf.jsxs)("p",{className:"text-2xl font-bold text-green-900",children:[((e.yearly_totals.current_year.water-e.yearly_totals.previous_year.water)/e.yearly_totals.previous_year.water*100).toFixed(1),"%"]}),(0,Gf.jsx)("p",{className:"text-sm text-gray-600",children:e.yearly_totals.current_year.water>e.yearly_totals.previous_year.water?"\u2197\ufe0f Art\u0131\u015f":"\u2198\ufe0f Azal\u0131\u015f"})]}),(0,Gf.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg",children:[(0,Gf.jsx)("h4",{className:"font-semibold text-yellow-700",children:"Do\u011falgaz De\u011fi\u015fimi"}),(0,Gf.jsxs)("p",{className:"text-2xl font-bold text-yellow-900",children:[((e.yearly_totals.current_year.natural_gas-e.yearly_totals.previous_year.natural_gas)/e.yearly_totals.previous_year.natural_gas*100).toFixed(1),"%"]}),(0,Gf.jsx)("p",{className:"text-sm text-gray-600",children:e.yearly_totals.current_year.natural_gas>e.yearly_totals.previous_year.natural_gas?"\u2197\ufe0f Art\u0131\u015f":"\u2198\ufe0f Azal\u0131\u015f"})]})]})]})]}),!e&&!f&&(0,Gf.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-md text-center",children:[(0,Gf.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:"Veri Bulunamad\u0131"}),(0,Gf.jsx)("p",{className:"text-gray-600",children:"admin"!==y||o?"Se\xe7ilen d\xf6nem i\xe7in t\xfcketim verisi bulunmuyor.":"L\xfctfen bir m\xfc\u015fteri se\xe7in. ".concat(0===i.length?"(M\xfc\u015fteri listesi y\xfcklenemiyor - \ud83d\udd04 butonuna t\u0131klay\u0131n)":"")})]})]})},tp=e=>{var t,n,r;let{onNavigate:i}=e;const[s,o]=(0,a.useState)(null),[l,c]=(0,a.useState)([]),[u,d]=(0,a.useState)([]),[h,f]=(0,a.useState)(null),[p,m]=(0,a.useState)(!1),{authToken:g,userRole:b,dbUser:y}=Jf();(0,a.useEffect)((()=>{x(),k(),"client"===b&&null!==y&&void 0!==y&&y.client_id&&v()}),[g,b,y]);const v=async()=>{try{const e=g?{Authorization:"Bearer ".concat(g)}:{},t=await Tt.get("".concat(Xf,"/documents"),{headers:e});d(Array.isArray(t.data)?t.data:[])}catch(e){console.error("Error fetching documents:",e),d([])}},x=async()=>{try{const e=g?{Authorization:"Bearer ".concat(g)}:{},t=await Tt.get("".concat(Xf,"/stats"),{headers:e});o(t.data)}catch(e){console.error("Error fetching stats:",e),o({total_clients:0,stage_distribution:{stage_1:0,stage_2:0,stage_3:0}})}},k=async()=>{try{const e=g?{Authorization:"Bearer ".concat(g)}:{};console.log("\ud83d\udd0d Clients API call:",{authToken:g?"".concat(g.substring(0,20),"..."):"null",hasHeaders:!!e.Authorization});const t=await Tt.get("".concat(Xf,"/clients"),{headers:e});Array.isArray(t.data)?(c(t.data),console.log("\u2705 Clients fetched:",t.data.length)):(console.error("\u274c Invalid response type:",typeof t.data,t.data),c([]))}catch(n){var e,t;console.error("\u274c Error fetching clients:",null===(e=n.response)||void 0===e?void 0:e.status,null===(t=n.response)||void 0===t?void 0:t.data),c([])}};return(0,Gf.jsxs)("div",{className:"space-y-6",children:[(0,Gf.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Gf.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"admin"===b?"Admin Dashboard":"M\xfc\u015fteri Dashboard"}),s&&(0,Gf.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,Gf.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg border-l-4 border-blue-500",children:[(0,Gf.jsx)("h3",{className:"text-lg font-semibold text-blue-700",children:"admin"===b?"Toplam M\xfc\u015fteri":"Hesap Durumu"}),(0,Gf.jsx)("p",{className:"text-3xl font-bold text-blue-900",children:s.total_clients})]}),(0,Gf.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg border-l-4 border-green-500",children:[(0,Gf.jsx)("h3",{className:"text-lg font-semibold text-green-700",children:"I. A\u015fama"}),(0,Gf.jsx)("p",{className:"text-3xl font-bold text-green-900",children:(null===(t=s.stage_distribution)||void 0===t?void 0:t.stage_1)||0})]}),(0,Gf.jsxs)("div",{className:"bg-yellow-50 p-4 rounded-lg border-l-4 border-yellow-500",children:[(0,Gf.jsx)("h3",{className:"text-lg font-semibold text-yellow-700",children:"II. A\u015fama"}),(0,Gf.jsx)("p",{className:"text-3xl font-bold text-yellow-900",children:(null===(n=s.stage_distribution)||void 0===n?void 0:n.stage_2)||0})]}),(0,Gf.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg border-l-4 border-purple-500",children:[(0,Gf.jsx)("h3",{className:"text-lg font-semibold text-purple-700",children:"III. A\u015fama"}),(0,Gf.jsx)("p",{className:"text-3xl font-bold text-purple-900",children:(null===(r=s.stage_distribution)||void 0===r?void 0:r.stage_3)||0})]})]})]}),(0,Gf.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Gf.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Gf.jsx)("h3",{className:"text-xl font-semibold text-gray-800",children:"admin"===b?"Son M\xfc\u015fteriler":"Hesap Bilgileri"}),"admin"===b&&(0,Gf.jsx)("button",{onClick:()=>i("clients"),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"T\xfcm M\xfc\u015fterileri G\xf6r"})]}),(0,Gf.jsx)("div",{className:"overflow-x-auto",children:(0,Gf.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,Gf.jsx)("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:(0,Gf.jsxs)("tr",{children:[(0,Gf.jsx)("th",{className:"px-6 py-3",children:"Otel Ad\u0131"}),(0,Gf.jsx)("th",{className:"px-6 py-3",children:"\u0130leti\u015fim Ki\u015fisi"}),(0,Gf.jsx)("th",{className:"px-6 py-3",children:"A\u015fama"}),(0,Gf.jsx)("th",{className:"px-6 py-3",children:"Tarih"}),"admin"===b&&(0,Gf.jsx)("th",{className:"px-6 py-3",children:"\u0130\u015flemler"})]})}),(0,Gf.jsx)("tbody",{children:(Array.isArray(l)?l:[]).slice(0,5).map((e=>(0,Gf.jsxs)("tr",{className:"bg-white border-b hover:bg-gray-50",children:[(0,Gf.jsx)("td",{className:"px-6 py-4 font-medium text-gray-900",children:e.hotel_name}),(0,Gf.jsx)("td",{className:"px-6 py-4",children:e.contact_person}),(0,Gf.jsx)("td",{className:"px-6 py-4",children:(0,Gf.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat("I.A\u015fama"===e.current_stage?"bg-green-100 text-green-800":"II.A\u015fama"===e.current_stage?"bg-yellow-100 text-yellow-800":"bg-purple-100 text-purple-800"),children:e.current_stage})}),(0,Gf.jsx)("td",{className:"px-6 py-4",children:new Date(e.created_at).toLocaleDateString("tr-TR")}),"admin"===b&&(0,Gf.jsx)("td",{className:"px-6 py-4",children:(0,Gf.jsx)("button",{onClick:()=>i("project",e),className:"text-blue-600 hover:text-blue-900",children:"Detay"})})]},e.id)))})]})})]}),"client"===b&&Array.isArray(l)&&l.length>0&&(0,Gf.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Gf.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-4 flex items-center",children:"\ud83c\udf31 Karbon Ayak \u0130zi Raporlar\u0131m"}),(Array.isArray(l)?l:[]).map((e=>(0,Gf.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 p-4 rounded-lg border border-green-200 mb-4",children:[(0,Gf.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Gf.jsxs)("div",{className:"flex-1",children:[(0,Gf.jsxs)("h4",{className:"font-semibold text-green-800 mb-2",children:["\ud83c\udfe8 ",e.hotel_name]}),e.carbon_footprint?(0,Gf.jsxs)("div",{className:"space-y-2",children:[(0,Gf.jsxs)("div",{className:"flex items-center",children:[(0,Gf.jsx)("span",{className:"text-2xl mr-3",children:"\ud83d\udcca"}),(0,Gf.jsxs)("div",{children:[(0,Gf.jsxs)("p",{className:"font-bold text-2xl text-green-700",children:[e.carbon_footprint.toFixed(2)," kg CO2/y\u0131l"]}),(0,Gf.jsx)("p",{className:"text-sm text-green-600",children:"Y\u0131ll\u0131k Karbon Ayak \u0130zi"})]})]}),(0,Gf.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,Gf.jsx)("span",{className:"mr-2",children:"\u2705"}),(0,Gf.jsx)("span",{children:"Karbon ayak izi analizi tamamland\u0131"})]}),(0,Gf.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,Gf.jsx)("span",{className:"mr-2",children:"\ud83d\udcc4"}),(0,Gf.jsx)("span",{children:"Detayl\u0131 rapor haz\u0131r"})]})]}):(0,Gf.jsxs)("div",{className:"flex items-center",children:[(0,Gf.jsx)("span",{className:"text-2xl mr-3",children:"\u23f3"}),(0,Gf.jsxs)("div",{children:[(0,Gf.jsx)("p",{className:"font-semibold text-gray-700",children:"Karbon Ayak \u0130zi Analizi"}),(0,Gf.jsx)("p",{className:"text-sm text-gray-500",children:"Analiziniz devam ediyor, tamamland\u0131\u011f\u0131nda size bildirilecektir"})]})]})]}),e.carbon_footprint&&(0,Gf.jsxs)("button",{onClick:()=>{const t=u.find((t=>t.client_id===e.id&&"Karbon Ayak \u0130zi Raporu"===t.document_type));t?(e=>{f(e),m(!0)})(t):alert("Karbon ayak izi raporu hen\xfcz y\xfcklenmemi\u015f.")},className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-all transform hover:scale-105 shadow-md flex items-center",children:[(0,Gf.jsx)("span",{className:"mr-2",children:"\ud83d\udccb"}),"Raporu G\xf6r\xfcnt\xfcle"]})]}),e.carbon_footprint&&(0,Gf.jsx)("div",{className:"mt-4 pt-4 border-t border-green-200",children:(0,Gf.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-center",children:[(0,Gf.jsxs)("div",{className:"bg-white p-3 rounded-lg shadow-sm",children:[(0,Gf.jsx)("div",{className:"text-lg font-bold text-green-600",children:(e.carbon_footprint/365).toFixed(1)}),(0,Gf.jsx)("div",{className:"text-xs text-gray-500",children:"kg CO2/g\xfcn"})]}),(0,Gf.jsxs)("div",{className:"bg-white p-3 rounded-lg shadow-sm",children:[(0,Gf.jsx)("div",{className:"text-lg font-bold text-blue-600",children:(e.carbon_footprint/12).toFixed(1)}),(0,Gf.jsx)("div",{className:"text-xs text-gray-500",children:"kg CO2/ay"})]}),(0,Gf.jsxs)("div",{className:"bg-white p-3 rounded-lg shadow-sm",children:[(0,Gf.jsx)("div",{className:"text-lg font-bold text-purple-600",children:e.current_stage}),(0,Gf.jsx)("div",{className:"text-xs text-gray-500",children:"Mevcut A\u015fama"})]}),(0,Gf.jsxs)("div",{className:"bg-white p-3 rounded-lg shadow-sm",children:[(0,Gf.jsx)("div",{className:"text-lg font-bold text-orange-600",children:u.filter((t=>t.client_id===e.id)).length}),(0,Gf.jsx)("div",{className:"text-xs text-gray-500",children:"Toplam Belge"})]})]})})]},e.id)))]}),p&&h&&(0,Gf.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,Gf.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-90vh overflow-y-auto",children:[(0,Gf.jsx)("div",{className:"bg-gradient-to-r from-green-600 to-blue-600 text-white p-6 rounded-t-xl",children:(0,Gf.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Gf.jsxs)("div",{className:"flex items-center",children:[(0,Gf.jsx)("span",{className:"text-3xl mr-3",children:(e=>{switch(e.split(".").pop().toLowerCase()){case"pdf":return"\ud83d\udcc4";case"doc":case"docx":return"\ud83d\udcdd";case"xls":case"xlsx":return"\ud83d\udcca";case"jpg":case"jpeg":case"png":return"\ud83d\uddbc\ufe0f";case"zip":case"rar":return"\ud83d\udce6";default:return"\ud83d\udccb"}})(h.file_path)}),(0,Gf.jsxs)("div",{children:[(0,Gf.jsx)("h3",{className:"text-xl font-bold",children:"Karbon Ayak \u0130zi Raporu"}),(0,Gf.jsx)("p",{className:"text-green-100 text-sm",children:h.name})]})]}),(0,Gf.jsx)("button",{onClick:()=>m(!1),className:"text-white hover:text-red-300 text-2xl font-bold w-8 h-8 flex items-center justify-center rounded-full hover:bg-white hover:bg-opacity-20 transition-all",children:"\xd7"})]})}),(0,Gf.jsxs)("div",{className:"p-6 space-y-6",children:[(0,Gf.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Gf.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg border-l-4 border-green-500",children:[(0,Gf.jsx)("label",{className:"block text-xs font-semibold text-green-700 uppercase tracking-wide mb-1",children:"Belge T\xfcr\xfc"}),(0,Gf.jsx)("p",{className:"text-sm font-medium text-green-900",children:h.document_type})]}),(0,Gf.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg border-l-4 border-blue-500",children:[(0,Gf.jsx)("label",{className:"block text-xs font-semibold text-blue-700 uppercase tracking-wide mb-1",children:"Proje A\u015famas\u0131"}),(0,Gf.jsx)("span",{className:"inline-block px-3 py-1 text-sm font-semibold rounded-full ".concat("I.A\u015fama"===h.stage?"bg-green-100 text-green-800":"II.A\u015fama"===h.stage?"bg-yellow-100 text-yellow-800":"bg-purple-100 text-purple-800"),children:h.stage})]})]}),(0,Gf.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Gf.jsxs)("div",{className:"bg-orange-50 p-4 rounded-lg border-l-4 border-orange-500",children:[(0,Gf.jsx)("label",{className:"block text-xs font-semibold text-orange-700 uppercase tracking-wide mb-1",children:"Dosya Boyutu"}),(0,Gf.jsx)("p",{className:"text-lg font-bold text-orange-900",children:(e=>{if(!e)return"Unknown";const t=Math.floor(Math.log(e)/Math.log(1024));return Math.round(e/Math.pow(1024,t)*100)/100+" "+["Bytes","KB","MB","GB"][t]})(h.file_size)})]}),(0,Gf.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg border-l-4 border-purple-500",children:[(0,Gf.jsx)("label",{className:"block text-xs font-semibold text-purple-700 uppercase tracking-wide mb-1",children:"Y\xfcklenme Tarihi"}),(0,Gf.jsx)("p",{className:"text-sm font-medium text-purple-900",children:new Date(h.created_at).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),(0,Gf.jsx)("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 border-l-4 border-green-400 p-4 rounded-lg",children:(0,Gf.jsxs)("div",{className:"flex items-start",children:[(0,Gf.jsx)("div",{className:"flex-shrink-0",children:(0,Gf.jsx)("span",{className:"text-2xl",children:"\ud83c\udf31"})}),(0,Gf.jsxs)("div",{className:"ml-3",children:[(0,Gf.jsx)("h4",{className:"text-sm font-semibold text-green-800 mb-1",children:"Karbon Ayak \u0130zi Raporu"}),(0,Gf.jsx)("p",{className:"text-sm text-green-700",children:"Bu rapor, otelimizin y\u0131ll\u0131k karbon emisyonlar\u0131n\u0131n detayl\u0131 analizini i\xe7ermektedir. S\xfcrd\xfcr\xfclebilirlik hedeflerinize ula\u015fman\u0131zda rehber olacakt\u0131r."})]})]})})]}),(0,Gf.jsxs)("div",{className:"bg-gray-50 px-6 py-4 rounded-b-xl flex justify-between items-center",children:[(0,Gf.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,Gf.jsx)("span",{className:"mr-2",children:"\ud83d\udcc5"}),"Rapor tarihi: ",new Date(h.created_at).toLocaleDateString("tr-TR")]}),(0,Gf.jsx)("button",{onClick:()=>m(!1),className:"bg-green-600 text-white px-6 py-2 rounded-lg hover:bg-green-700 transition-all transform hover:scale-105 shadow-md",children:"\u2713 Tamam"})]})]})})]})},np=e=>{let{onNavigate:t}=e;const[n,r]=(0,a.useState)([]),[i,s]=(0,a.useState)(!1),[o,l]=(0,a.useState)(null),[c,u]=(0,a.useState)({name:"",hotel_name:"",contact_person:"",email:"",phone:"",address:""}),{authToken:h,userRole:f}=Jf();(0,a.useEffect)((()=>{p()}),[h]);const p=async()=>{try{const e=h?{Authorization:"Bearer ".concat(h)}:{},t=await Tt.get("".concat(Xf,"/clients"),{headers:e});r(Array.isArray(t.data)?t.data:[])}catch(e){console.error("Error fetching clients:",e),r([])}};return"admin"!==f?(0,Gf.jsx)("div",{className:"text-center py-8",children:(0,Gf.jsx)("p",{className:"text-red-600",children:"Bu sayfaya eri\u015fim yetkiniz yok."})}):(0,Gf.jsx)("div",{className:"space-y-6",children:(0,Gf.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Gf.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Gf.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"M\xfc\u015fteri Y\xf6netimi"}),(0,Gf.jsx)("button",{onClick:()=>s(!0),className:"bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 transition-colors",children:"Yeni M\xfc\u015fteri Ekle"})]}),i&&(0,Gf.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Gf.jsxs)("div",{className:"bg-white p-6 rounded-lg w-full max-w-md",children:[(0,Gf.jsx)("h3",{className:"text-lg font-semibold mb-4",children:o?"M\xfc\u015fteri D\xfczenle":"Yeni M\xfc\u015fteri Ekle"}),(0,Gf.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{o?await Tt.put("".concat(Xf,"/clients/").concat(o.id),c,{headers:{Authorization:"Bearer ".concat(h)}}):await Tt.post("".concat(Xf,"/clients"),c,{headers:{Authorization:"Bearer ".concat(h)}}),p(),s(!1),l(null),u({name:"",hotel_name:"",contact_person:"",email:"",phone:"",address:""})}catch(r){var t,n;console.error("Error saving client:",r),alert("Hata: "+((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.detail)||"Bilinmeyen hata"))}},className:"space-y-4",children:[(0,Gf.jsx)("input",{type:"text",placeholder:"Firma Ad\u0131",value:c.name,onChange:e=>u(d(d({},c),{},{name:e.target.value})),className:"w-full p-3 border border-gray-300 rounded-md",required:!0}),(0,Gf.jsx)("input",{type:"text",placeholder:"Otel Ad\u0131",value:c.hotel_name,onChange:e=>u(d(d({},c),{},{hotel_name:e.target.value})),className:"w-full p-3 border border-gray-300 rounded-md",required:!0}),(0,Gf.jsx)("input",{type:"text",placeholder:"\u0130leti\u015fim Ki\u015fisi",value:c.contact_person,onChange:e=>u(d(d({},c),{},{contact_person:e.target.value})),className:"w-full p-3 border border-gray-300 rounded-md",required:!0}),(0,Gf.jsx)("input",{type:"email",placeholder:"E-posta",value:c.email,onChange:e=>u(d(d({},c),{},{email:e.target.value})),className:"w-full p-3 border border-gray-300 rounded-md",required:!0}),(0,Gf.jsx)("input",{type:"tel",placeholder:"Telefon",value:c.phone,onChange:e=>u(d(d({},c),{},{phone:e.target.value})),className:"w-full p-3 border border-gray-300 rounded-md",required:!0}),(0,Gf.jsx)("textarea",{placeholder:"Adres",value:c.address,onChange:e=>u(d(d({},c),{},{address:e.target.value})),className:"w-full p-3 border border-gray-300 rounded-md",rows:"3",required:!0}),(0,Gf.jsxs)("div",{className:"flex space-x-3",children:[(0,Gf.jsx)("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-2 rounded-md hover:bg-blue-700 transition-colors",children:o?"G\xfcncelle":"Kaydet"}),(0,Gf.jsx)("button",{type:"button",onClick:()=>{s(!1),l(null),u({name:"",hotel_name:"",contact_person:"",email:"",phone:"",address:""})},className:"flex-1 bg-gray-500 text-white py-2 rounded-md hover:bg-gray-600 transition-colors",children:"\u0130ptal"})]})]})]})}),(0,Gf.jsx)("div",{className:"overflow-x-auto",children:(0,Gf.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,Gf.jsx)("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:(0,Gf.jsxs)("tr",{children:[(0,Gf.jsx)("th",{className:"px-6 py-3",children:"Otel Ad\u0131"}),(0,Gf.jsx)("th",{className:"px-6 py-3",children:"\u0130leti\u015fim Ki\u015fisi"}),(0,Gf.jsx)("th",{className:"px-6 py-3",children:"E-posta"}),(0,Gf.jsx)("th",{className:"px-6 py-3",children:"A\u015fama"}),(0,Gf.jsx)("th",{className:"px-6 py-3",children:"Tarih"}),(0,Gf.jsx)("th",{className:"px-6 py-3",children:"\u0130\u015flemler"})]})}),(0,Gf.jsx)("tbody",{children:(Array.isArray(n)?n:[]).map((e=>(0,Gf.jsxs)("tr",{className:"bg-white border-b hover:bg-gray-50",children:[(0,Gf.jsx)("td",{className:"px-6 py-4 font-medium text-gray-900",children:e.hotel_name}),(0,Gf.jsx)("td",{className:"px-6 py-4",children:e.contact_person}),(0,Gf.jsx)("td",{className:"px-6 py-4",children:e.email}),(0,Gf.jsx)("td",{className:"px-6 py-4",children:(0,Gf.jsxs)("select",{value:e.current_stage,onChange:t=>(async(e,t)=>{try{await Tt.put("".concat(Xf,"/clients/").concat(e),{current_stage:t},{headers:{Authorization:"Bearer ".concat(h)}}),p()}catch(n){console.error("Error updating stage:",n)}})(e.id,t.target.value),className:"px-2 py-1 text-xs border rounded",children:[(0,Gf.jsx)("option",{value:"I.A\u015fama",children:"I.A\u015fama"}),(0,Gf.jsx)("option",{value:"II.A\u015fama",children:"II.A\u015fama"}),(0,Gf.jsx)("option",{value:"III.A\u015fama",children:"III.A\u015fama"})]})}),(0,Gf.jsx)("td",{className:"px-6 py-4",children:new Date(e.created_at).toLocaleDateString("tr-TR")}),(0,Gf.jsx)("td",{className:"px-6 py-4",children:(0,Gf.jsxs)("div",{className:"flex space-x-2",children:[(0,Gf.jsx)("button",{onClick:()=>(e=>{l(e),u({name:e.name,hotel_name:e.hotel_name,contact_person:e.contact_person,email:e.email,phone:e.phone,address:e.address}),s(!0)})(e),className:"text-blue-600 hover:text-blue-900",children:"D\xfczenle"}),(0,Gf.jsx)("button",{onClick:()=>t("project",e),className:"text-green-600 hover:text-green-900",children:"Proje"}),(0,Gf.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Bu m\xfc\u015fteriyi silmek istedi\u011finizden emin misiniz?"))try{await Tt.delete("".concat(Xf,"/clients/").concat(e),{headers:{Authorization:"Bearer ".concat(h)}}),p()}catch(t){console.error("Error deleting client:",t),alert("Silme i\u015fleminde hata olu\u015ftu!")}})(e.id),className:"text-red-600 hover:text-red-900",children:"Sil"})]})})]},e.id)))})]})})]})})},rp=()=>{const[e,t]=(0,a.useState)([]),[n,r]=(0,a.useState)([]),[i,s]=(0,a.useState)(""),[o,l]=(0,a.useState)(!1),[c,u]=(0,a.useState)(!1),[h,f]=(0,a.useState)(null),[p,m]=(0,a.useState)(0),[g,b]=(0,a.useState)({client_id:"",name:"",document_type:"T\xfcrkiye S\xfcrd\xfcr\xfclebilir Turizm Program\u0131 Kriterleri (TR-I)",stage:"I.A\u015fama",files:[]}),{authToken:y,userRole:v,dbUser:x}=Jf();(0,a.useEffect)((()=>{k(),"admin"===v&&w()}),[y,v]);const k=async()=>{try{const e=y?{Authorization:"Bearer ".concat(y)}:{},n=await Tt.get("".concat(Xf,"/documents"),{headers:e});t(Array.isArray(n.data)?n.data:[])}catch(e){console.error("Error fetching documents:",e),t([])}},w=async()=>{try{const e=y?{Authorization:"Bearer ".concat(y)}:{},t=await Tt.get("".concat(Xf,"/clients"),{headers:e});r(Array.isArray(t.data)?t.data:[])}catch(e){console.error("Error fetching clients:",e),r([])}},_=async(e,t)=>{const n=1048576,r=Math.ceil(e.size/n);if(e.size<n)return await S(e,t);console.log("\ud83d\udce6 Large file detected (".concat((e.size/1024/1024).toFixed(2),"MB), using chunked upload: ").concat(r," chunks"));const i="upload_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),a=[];try{for(let l=0;l<r;l++){const o=l*n,c=Math.min(o+n,e.size),u=e.slice(o,c);console.log("\ud83d\udce4 Uploading chunk ".concat(l+1,"/").concat(r," (").concat((u.size/1024).toFixed(1),"KB)"));const d=new FormData;d.append("file_chunk",u),d.append("chunk_index",l.toString()),d.append("total_chunks",r.toString()),d.append("upload_id",i),d.append("original_filename",e.name),0===l&&Object.keys(t).forEach((e=>{d.append(e,t[e])}));let h=!1,f=0;const p=3;for(;!h&&f<p;)try{const e=await Tt.post("".concat(Xf,"/upload-chunk"),d,{headers:{Authorization:"Bearer ".concat(y),"Content-Type":"multipart/form-data"},timeout:6e4,onUploadProgress:e=>{const t=Math.round(100*e.loaded/e.total),n=Math.round(100*(l+t/100)/r);m(n),console.log("\ud83d\udcca Chunk ".concat(l+1," progress: ").concat(t,"% (Overall: ").concat(n,"%)"))}});a.push(e.data),h=!0,console.log("\u2705 Chunk ".concat(l+1," uploaded successfully"))}catch(s){if(f++,console.error("\u274c Chunk ".concat(l+1," failed (attempt ").concat(f,"):"),s.message),!(f<p))throw new Error("Chunk ".concat(l+1," failed after ").concat(p," attempts: ").concat(s.message));console.log("\ud83d\udd04 Retrying chunk ".concat(l+1," in 2 seconds...")),await new Promise((e=>setTimeout(e,2e3)))}}console.log("\ud83d\udd17 Finalizing chunked upload...");const o=await Tt.post("".concat(Xf,"/finalize-upload"),{upload_id:i,total_chunks:r,filename:e.name,file_size:e.size},{headers:{Authorization:"Bearer ".concat(y)},timeout:3e4});return console.log("\u2705 Chunked upload completed successfully"),o.data}catch(o){throw console.error("\u274c Chunked upload failed:",o),o}},S=async(e,t)=>{const n=new FormData;n.append("file",e),n.append("client_id",t.clientId),n.append("document_name",t.documentName),n.append("document_type",t.documentType),n.append("stage",t.stage);const r=Math.max(3e4,Math.min(e.size/102400,6e5));console.log("\u23f1\ufe0f Upload timeout set to: ".concat((r/1e3).toFixed(0)," seconds"));return await Tt.post("".concat(Xf,"/upload-document"),n,{headers:{Authorization:"Bearer ".concat(y)},timeout:r,onUploadProgress:t=>{const n=Math.round(100*t.loaded/t.total);console.log("\ud83d\udcca Upload progress: ".concat(n,"% (").concat(e.name,")"))}})},j=async e=>{if(window.confirm("Bu belgeyi silmek istedi\u011finizden emin misiniz?"))try{await Tt.delete("".concat(Xf,"/documents/").concat(e),{headers:{Authorization:"Bearer ".concat(y)}}),k(),alert("Belge ba\u015far\u0131yla silindi!")}catch(t){console.error("Error deleting document:",t),alert("Belge silinirken hata olu\u015ftu!")}},N=async e=>{try{console.log("\ud83d\udce5 DocumentManagement - Download request for document:",e.id),console.log("\ud83d\udd0d Auth token exists:",!!y);const t=await Tt.get("".concat(Xf,"/documents/").concat(e.id,"/download"),{headers:{Authorization:"Bearer ".concat(y)}});console.log("\u2705 Download response:",t.data);const n=t.data.download_url;n&&"#"!==n?(console.log("\ud83d\ude80 Opening download URL:",n),window.open(n,"_blank")):(console.error("\u274c No download URL in response"),alert("Dosya indirme ba\u011flant\u0131s\u0131 bulunamad\u0131."))}catch(r){var t,n;console.error("\u274c Error downloading document:",r),alert("Dosya indirilirken hata olu\u015ftu: "+((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.detail)||"Bilinmeyen hata"))}},C=e=>{var t;switch(null===(t=e.split(".").pop())||void 0===t?void 0:t.toLowerCase()){case"pdf":return"\ud83d\udcc4";case"doc":case"docx":return"\ud83d\udcdd";case"xls":case"xlsx":return"\ud83d\udcca";case"zip":case"rar":return"\ud83d\udce6";case"jpg":case"jpeg":case"png":return"\ud83d\uddbc\ufe0f";default:return"\ud83d\udcce"}},E=()=>"admin"===v&&i?(e||[]).filter((e=>e.client_id===i)):e||[],P=e=>{const t=(n||[]).find((t=>t.id===e));return t?t.hotel_name:"Bilinmeyen M\xfc\u015fteri"};return(0,Gf.jsxs)("div",{className:"space-y-6",children:[(0,Gf.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Gf.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Gf.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"admin"===v?"Belge Y\xf6netimi":"Belgelerim"}),(0,Gf.jsx)("button",{onClick:()=>l(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"admin"===v?"Yeni Belge Y\xfckle":"Belge Y\xfckle"})]}),"admin"===v&&(0,Gf.jsxs)("div",{className:"mb-4",children:[(0,Gf.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"M\xfc\u015fteriye G\xf6re Filtrele:"}),(0,Gf.jsxs)("select",{value:i,onChange:e=>s(e.target.value),className:"w-full md:w-64 p-2 border border-gray-300 rounded-md",children:[(0,Gf.jsx)("option",{value:"",children:"T\xfcm M\xfc\u015fteriler"}),Array.isArray(n)?n.map((e=>(0,Gf.jsx)("option",{value:e.id,children:e.hotel_name},e.id))):null]})]}),(0,Gf.jsx)("div",{className:"overflow-x-auto",children:(0,Gf.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,Gf.jsx)("thead",{className:"text-xs text-gray-700 uppercase bg-gray-50",children:(0,Gf.jsxs)("tr",{children:[(0,Gf.jsx)("th",{className:"px-6 py-3",children:"Belge Ad\u0131"}),(0,Gf.jsx)("th",{className:"px-6 py-3",children:"T\xfcr"}),(0,Gf.jsx)("th",{className:"px-6 py-3",children:"A\u015fama"}),"admin"===v&&(0,Gf.jsx)("th",{className:"px-6 py-3",children:"M\xfc\u015fteri"}),(0,Gf.jsx)("th",{className:"px-6 py-3",children:"Y\xfcklenme Tarihi"}),(0,Gf.jsx)("th",{className:"px-6 py-3",children:"\u0130\u015flemler"})]})}),(0,Gf.jsxs)("tbody",{children:[E().map((e=>(0,Gf.jsxs)("tr",{className:"bg-white border-b hover:bg-gray-50",children:[(0,Gf.jsx)("td",{className:"px-6 py-4",children:(0,Gf.jsxs)("div",{className:"flex items-center",children:[(0,Gf.jsx)("span",{className:"text-lg mr-2",children:C(e.file_path)}),(0,Gf.jsx)("span",{className:"font-medium text-gray-900",children:e.name})]})}),(0,Gf.jsx)("td",{className:"px-6 py-4",children:(0,Gf.jsx)("span",{className:"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full",children:e.document_type})}),(0,Gf.jsx)("td",{className:"px-6 py-4",children:(0,Gf.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat("I.A\u015fama"===e.stage?"bg-green-100 text-green-800":"II.A\u015fama"===e.stage?"bg-yellow-100 text-yellow-800":"bg-purple-100 text-purple-800"),children:e.stage})}),"admin"===v&&(0,Gf.jsx)("td",{className:"px-6 py-4",children:P(e.client_id)}),(0,Gf.jsx)("td",{className:"px-6 py-4",children:new Date(e.created_at).toLocaleDateString("tr-TR")}),(0,Gf.jsx)("td",{className:"px-6 py-4",children:(0,Gf.jsxs)("div",{className:"flex space-x-2",children:[(0,Gf.jsx)("button",{onClick:()=>(e=>{f(e),u(!0)})(e),className:"text-blue-600 hover:text-blue-900 font-medium",children:"\ud83d\udccb Detay"}),(0,Gf.jsx)("button",{onClick:()=>N(e),className:"text-green-600 hover:text-green-900 font-medium",children:"\ud83d\udce5 \u0130ndir"}),"admin"===v&&(0,Gf.jsx)("button",{onClick:()=>j(e.id),className:"text-red-600 hover:text-red-900",children:"\ud83d\uddd1\ufe0f Sil"})]})})]},e.id))),0===E().length&&(0,Gf.jsx)("tr",{children:(0,Gf.jsx)("td",{colSpan:"admin"===v?6:5,className:"px-6 py-8 text-center text-gray-500",children:"Hen\xfcz belge y\xfcklenmemi\u015f."})})]})]})})]}),o&&(0,Gf.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Gf.jsxs)("div",{className:"bg-white p-6 rounded-lg w-full max-w-md max-h-90vh overflow-y-auto",children:[(0,Gf.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Yeni Belge Y\xfckle"}),(0,Gf.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),g.files&&0!==g.files.length){for(let e of g.files){const t=e.size/1024/1024;if(t>500)return void alert("Dosya \xe7ok b\xfcy\xfck: ".concat(e.name," (").concat(t.toFixed(1),"MB). Maksimum 500MB y\xfckleyebilirsiniz."))}try{const e="admin"===v?g.client_id:x.client_id;for(let t=0;t<g.files.length;t++){const n=g.files[t],r=n.name,i=(n.size/1024/1024).toFixed(2);console.log("\ud83d\udce4 Uploading file ".concat(t+1,"/").concat(g.files.length,": ").concat(r," (").concat(i,"MB)"));const a={clientId:e,documentName:1===g.files.length?g.name:"".concat(g.name," - ").concat(r),documentType:g.document_type,stage:g.stage};console.log("\ud83d\udd0d Auth Token:",y?y.substring(0,50)+"...":"No token"),console.log("\ud83d\udd0d Client ID:",e),console.log("\ud83d\udd0d File Details:",{name:n.name,size:n.size,type:n.type,sizeInMB:i});const s=await _(n,a);console.log("\u2705 File ".concat(t+1," uploaded successfully:"),s.data)}k(),l(!1),b({client_id:"",name:"",document_type:"T\xfcrkiye S\xfcrd\xfcr\xfclebilir Turizm Program\u0131 Kriterleri (TR-I)",stage:"I.A\u015fama",files:[]}),alert("".concat(g.files.length," dosya Google Cloud Storage'a ba\u015far\u0131yla y\xfcklendi! \ud83c\udf89"))}catch(i){var t;if(console.error("\u274c Error uploading documents:",i),"ECONNABORTED"===i.code)alert("Dosya y\xfckleme zaman a\u015f\u0131m\u0131na u\u011frad\u0131. \u0130nternet ba\u011flant\u0131n\u0131z\u0131 kontrol edin veya daha k\xfc\xe7\xfck dosyalar y\xfcklemeyi deneyin.");else if(413===(null===(t=i.response)||void 0===t?void 0:t.status))alert("Dosya \xe7ok b\xfcy\xfck. Maksimum 500MB y\xfckleyebilirsiniz.");else if(i.message.includes("Network Error"))alert("A\u011f hatas\u0131: B\xfcy\xfck dosyalar i\xe7in internet ba\u011flant\u0131n\u0131z yeterli olmayabilir.");else{var n,r;alert("Dosya y\xfcklenirken hata olu\u015ftu: "+((null===(n=i.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.detail)||i.message||"Bilinmeyen hata"))}}}else alert("L\xfctfen en az bir dosya se\xe7in!")},className:"space-y-4",children:["admin"===v&&(0,Gf.jsxs)("div",{children:[(0,Gf.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["M\xfc\u015fteri ",(0,Gf.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Gf.jsxs)("select",{value:g.client_id,onChange:e=>b(d(d({},g),{},{client_id:e.target.value})),className:"w-full p-3 border border-gray-300 rounded-md",required:!0,children:[(0,Gf.jsx)("option",{value:"",children:"M\xfc\u015fteri Se\xe7in"}),Array.isArray(n)?n.map((e=>(0,Gf.jsx)("option",{value:e.id,children:e.hotel_name},e.id))):null]})]}),(0,Gf.jsxs)("div",{children:[(0,Gf.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Belge Ad\u0131 ",(0,Gf.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Gf.jsx)("input",{type:"text",placeholder:"\xd6rn: S\xfcrd\xfcr\xfclebilirlik Sertifikas\u0131",value:g.name,onChange:e=>b(d(d({},g),{},{name:e.target.value})),className:"w-full p-3 border border-gray-300 rounded-md",required:!0})]}),(0,Gf.jsxs)("div",{children:[(0,Gf.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Belge T\xfcr\xfc ",(0,Gf.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Gf.jsx)("select",{value:g.document_type,onChange:e=>b(d(d({},g),{},{document_type:e.target.value})),className:"w-full p-3 border border-gray-300 rounded-md",required:!0,children:["T\xfcrkiye S\xfcrd\xfcr\xfclebilir Turizm Program\u0131 Kriterleri (TR-I)","I. A\u015fama Belgesi","II. A\u015fama Belgesi","III. A\u015fama Belgesi","Karbon Ayak \u0130zi Raporu","S\xfcrd\xfcr\xfclebilirlik Raporu"].map((e=>(0,Gf.jsx)("option",{value:e,children:e},e)))})]}),(0,Gf.jsxs)("div",{children:[(0,Gf.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["A\u015fama ",(0,Gf.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Gf.jsx)("select",{value:g.stage,onChange:e=>b(d(d({},g),{},{stage:e.target.value})),className:"w-full p-3 border border-gray-300 rounded-md",required:!0,children:["I.A\u015fama","II.A\u015fama","III.A\u015fama"].map((e=>(0,Gf.jsx)("option",{value:e,children:e},e)))})]}),(0,Gf.jsxs)("div",{children:[(0,Gf.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Dosya(lar) ",(0,Gf.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Gf.jsx)("input",{type:"file",accept:".pdf,.doc,.docx,.xls,.xlsx,.zip,.rar,.jpg,.jpeg,.png",multiple:!0,onChange:e=>b(d(d({},g),{},{files:Array.from(e.target.files)})),className:"w-full p-3 border border-gray-300 rounded-md",required:!0}),(0,Gf.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Desteklenen formatlar: PDF, DOC, DOCX, XLS, XLSX, ZIP, RAR, JPG, PNG"}),(0,Gf.jsx)("p",{className:"text-xs text-blue-600 mt-1",children:"\ud83d\udca1 Birden fazla dosya se\xe7ebilirsiniz (Ctrl+Click)"})]}),(0,Gf.jsxs)("div",{className:"flex space-x-3",children:[(0,Gf.jsx)("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Y\xfckle"}),(0,Gf.jsx)("button",{type:"button",onClick:()=>l(!1),className:"flex-1 bg-gray-500 text-white py-2 rounded-md hover:bg-gray-600 transition-colors",children:"\u0130ptal"})]})]})]})}),c&&h&&(0,Gf.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,Gf.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-90vh overflow-y-auto",children:[(0,Gf.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white p-6 rounded-t-xl",children:(0,Gf.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Gf.jsxs)("div",{className:"flex items-center",children:[(0,Gf.jsx)("span",{className:"text-3xl mr-3",children:C(h.file_path)}),(0,Gf.jsxs)("div",{children:[(0,Gf.jsx)("h3",{className:"text-xl font-bold",children:"Belge Detaylar\u0131"}),(0,Gf.jsx)("p",{className:"text-blue-100 text-sm",children:h.name})]})]}),(0,Gf.jsx)("button",{onClick:()=>u(!1),className:"text-white hover:text-red-300 text-2xl font-bold w-8 h-8 flex items-center justify-center rounded-full hover:bg-white hover:bg-opacity-20 transition-all",children:"\xd7"})]})}),(0,Gf.jsxs)("div",{className:"p-6 space-y-6",children:[(0,Gf.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Gf.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg border-l-4 border-blue-500",children:[(0,Gf.jsx)("label",{className:"block text-xs font-semibold text-gray-600 uppercase tracking-wide mb-1",children:"Belge T\xfcr\xfc"}),(0,Gf.jsx)("p",{className:"text-sm font-medium text-gray-900",children:h.document_type})]}),(0,Gf.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg border-l-4 border-green-500",children:[(0,Gf.jsx)("label",{className:"block text-xs font-semibold text-gray-600 uppercase tracking-wide mb-1",children:"Proje A\u015famas\u0131"}),(0,Gf.jsx)("span",{className:"inline-block px-3 py-1 text-sm font-semibold rounded-full ".concat("I.A\u015fama"===h.stage?"bg-green-100 text-green-800":"II.A\u015fama"===h.stage?"bg-yellow-100 text-yellow-800":"bg-purple-100 text-purple-800"),children:h.stage})]})]}),(0,Gf.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,Gf.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg border-l-4 border-orange-500",children:[(0,Gf.jsx)("label",{className:"block text-xs font-semibold text-gray-600 uppercase tracking-wide mb-1",children:"Dosya Boyutu"}),(0,Gf.jsx)("p",{className:"text-lg font-bold text-gray-900",children:(e=>{if(0===e)return"0 Bytes";const t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB"][t]})(h.file_size)})]}),(0,Gf.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg border-l-4 border-purple-500",children:[(0,Gf.jsx)("label",{className:"block text-xs font-semibold text-gray-600 uppercase tracking-wide mb-1",children:"Y\xfcklenme Tarihi"}),(0,Gf.jsx)("p",{className:"text-sm font-medium text-gray-900",children:new Date(h.created_at).toLocaleDateString("tr-TR",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),"admin"===v&&(0,Gf.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg border-l-4 border-blue-500",children:[(0,Gf.jsx)("label",{className:"block text-xs font-semibold text-blue-700 uppercase tracking-wide mb-1",children:"\u0130lgili M\xfc\u015fteri"}),(0,Gf.jsx)("p",{className:"text-sm font-medium text-blue-900",children:P(h.client_id)})]}),(0,Gf.jsxs)("div",{className:"bg-gray-100 p-4 rounded-lg",children:[(0,Gf.jsx)("label",{className:"block text-xs font-semibold text-gray-600 uppercase tracking-wide mb-2",children:"Dosya Bilgileri"}),(0,Gf.jsxs)("div",{className:"space-y-2",children:[(0,Gf.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Gf.jsx)("span",{className:"text-sm text-gray-600",children:"Dosya Ad\u0131:"}),(0,Gf.jsx)("span",{className:"text-sm font-medium text-gray-900 bg-white px-2 py-1 rounded",children:h.file_path.split("/").pop()})]}),(0,Gf.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Gf.jsx)("span",{className:"text-sm text-gray-600",children:"Klas\xf6r:"}),(0,Gf.jsxs)("span",{className:"text-sm font-medium text-gray-900 bg-white px-2 py-1 rounded",children:["\ud83d\udcc1 ",h.stage]})]})]})]}),(0,Gf.jsx)("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 border-l-4 border-green-400 p-4 rounded-lg",children:(0,Gf.jsxs)("div",{className:"flex items-start",children:[(0,Gf.jsx)("div",{className:"flex-shrink-0",children:(0,Gf.jsx)("span",{className:"text-2xl",children:"\u2601\ufe0f"})}),(0,Gf.jsxs)("div",{className:"ml-3",children:[(0,Gf.jsx)("h4",{className:"text-sm font-semibold text-green-800 mb-1",children:"Belge Durumu"}),(0,Gf.jsxs)("p",{className:"text-sm text-green-700",children:["Belge ba\u015far\u0131yla ",(0,Gf.jsx)("strong",{children:"Google Cloud Storage"}),'\'a y\xfcklenmi\u015ftir. A\u015fa\u011f\u0131daki "\u0130ndir" butonuna t\u0131klayarak dosyay\u0131 g\xf6r\xfcnt\xfcleyebilirsiniz.']})]})]})})]}),(0,Gf.jsxs)("div",{className:"bg-gray-50 px-6 py-4 rounded-b-xl flex justify-between items-center",children:[(0,Gf.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,Gf.jsx)("span",{className:"mr-2",children:"\ud83d\udcc5"}),"Son g\xfcncelleme: ",new Date(h.created_at).toLocaleDateString("tr-TR")]}),(0,Gf.jsxs)("div",{className:"flex space-x-3",children:[(0,Gf.jsx)("button",{onClick:()=>N(h),className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-all transform hover:scale-105 shadow-md",children:"\ud83d\udce5 \u0130ndir"}),"admin"===v&&(0,Gf.jsx)("button",{onClick:()=>{window.confirm("Bu belgeyi kal\u0131c\u0131 olarak silmek istedi\u011finizden emin misiniz?")&&(j(h.id),u(!1))},className:"bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-all transform hover:scale-105 shadow-md",children:"\ud83d\uddd1\ufe0f Belgeyi Sil"}),(0,Gf.jsx)("button",{onClick:()=>u(!1),className:"bg-gray-600 text-white px-6 py-2 rounded-lg hover:bg-gray-700 transition-all transform hover:scale-105 shadow-md",children:"\u2715 Kapat"})]})]})]})})]})},ip=e=>{var t,n,r,i,s,o,l,c,u,h,f,p,m,g,b,y,v,x,k,w,_,S,j,N;let{onNavigate:C}=e;const[E,P]=(0,a.useState)([]),[M,O]=(0,a.useState)([]),[A,T]=(0,a.useState)(!1),[z,R]=(0,a.useState)(null),[L,D]=(0,a.useState)(null),[I,F]=(0,a.useState)((new Date).getFullYear()),[U,B]=(0,a.useState)({year:(new Date).getFullYear(),month:(new Date).getMonth()+1,electricity:"",water:"",natural_gas:"",coal:"",accommodation_count:""}),{authToken:W,userRole:V}=Jf();(0,a.useEffect)((()=>{W&&(H(),K(),q())}),[W,I,V]);const H=async()=>{if(W){if("admin"===V&&!U.client_id)return console.log("\u26a0\ufe0f Admin must select client for consumptions"),void P([]);try{let e="".concat(Xf,"/consumptions?year=").concat(I);"admin"===V&&U.client_id&&(e+="&client_id=".concat(U.client_id)),console.log("\ud83d\udd0d Fetching consumptions:",{year:I,client_id:U.client_id||"current user",authToken:W?"".concat(W.substring(0,20),"..."):"null"});const t=await Tt.get(e,{headers:{Authorization:"Bearer ".concat(W)}});Array.isArray(t.data)?(P(t.data),console.log("\u2705 Consumptions fetched:",t.data.length)):(console.error("\u274c Invalid consumptions response type:",typeof t.data,t.data),P([]))}catch(n){var e,t;console.error("\u274c Error fetching consumptions:",null===(e=n.response)||void 0===e?void 0:e.status,null===(t=n.response)||void 0===t?void 0:t.data),P([])}}else console.log("\u26a0\ufe0f No authToken, skipping consumptions fetch")},K=async()=>{if(W){if("admin"===V&&!U.client_id)return console.log("\u26a0\ufe0f Admin must select client for analytics"),void D(null);try{let e="".concat(Xf,"/consumptions/analytics?year=").concat(I);"admin"===V&&U.client_id&&(e+="&client_id=".concat(U.client_id));const t=await Tt.get(e,{headers:{Authorization:"Bearer ".concat(W)}});D(t.data),console.log("\u2705 Analytics fetched for client:",U.client_id||"current user")}catch(e){console.error("Error fetching analytics:",e),D(null)}}else console.log("\u26a0\ufe0f No authToken, skipping analytics fetch")},q=async()=>{if(W&&"admin"===V)try{const e=await Tt.get("".concat(Xf,"/clients"),{headers:{Authorization:"Bearer ".concat(W)}});Array.isArray(e.data)?(O(e.data),console.log("\u2705 Clients fetched for consumption:",e.data.length)):O([])}catch(e){console.error("Error fetching clients for consumption:",e),O([])}},Y=e=>["","Ocak","\u015eubat","Mart","Nisan","May\u0131s","Haziran","Temmuz","A\u011fustos","Eyl\xfcl","Ekim","Kas\u0131m","Aral\u0131k"][e];return(0,Gf.jsxs)("div",{className:"space-y-6",children:[(0,Gf.jsx)("div",{className:"bg-gradient-to-r from-green-500 to-blue-600 text-white p-6 rounded-lg shadow-lg",children:(0,Gf.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Gf.jsxs)("div",{children:[(0,Gf.jsx)("h2",{className:"text-3xl font-bold mb-2",children:"\u26a1 T\xfcketim Y\xf6netimi"}),(0,Gf.jsx)("p",{className:"text-green-100",children:"Ayl\u0131k enerji ve kaynak t\xfcketimlerinizi takip edin"})]}),(0,Gf.jsx)("button",{onClick:()=>C("dashboard"),className:"bg-white bg-opacity-20 text-white px-4 py-2 rounded-lg hover:bg-opacity-30 transition-all",children:"\u2190 Dashboard"})]})}),(0,Gf.jsxs)("div",{className:"flex justify-between items-center",children:[(0,Gf.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,Gf.jsx)("label",{className:"font-semibold text-gray-700",children:"Y\u0131l:"}),(0,Gf.jsx)("select",{value:I,onChange:e=>F(parseInt(e.target.value)),className:"px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[2025,2024,2023,2022,2021].map((e=>(0,Gf.jsx)("option",{value:e,children:e},e)))})]}),"admin"===V&&(0,Gf.jsxs)("button",{onClick:()=>{R(null),B({year:I,month:(new Date).getMonth()+1,electricity:"",water:"",natural_gas:"",coal:"",accommodation_count:""}),T(!0)},className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors flex items-center",children:[(0,Gf.jsx)("span",{className:"mr-2",children:"+"}),"Yeni T\xfcketim Verisi"]}),"client"===V&&(0,Gf.jsx)("div",{className:"text-gray-600 text-sm",children:"\ud83d\udcca T\xfcketim verilerinizi g\xf6r\xfcnt\xfcleyebilirsiniz"})]}),A&&(0,Gf.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,Gf.jsxs)("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-90vh overflow-y-auto",children:[(0,Gf.jsx)("div",{className:"bg-gradient-to-r from-blue-600 to-green-600 text-white p-6 rounded-t-xl",children:(0,Gf.jsx)("h3",{className:"text-xl font-bold",children:z?"T\xfcketim Verisini D\xfczenle":"Yeni T\xfcketim Verisi"})}),(0,Gf.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),W)try{const e=z?"".concat(Xf,"/consumptions/").concat(z.id):"".concat(Xf,"/consumptions"),t=z?"put":"post";console.log("\ud83d\udd0d Consumption API call:",{endpoint:e,method:t,authToken:W?"".concat(W.substring(0,20),"..."):"null"}),await Tt[t](e,d({year:parseInt(U.year),month:parseInt(U.month),electricity:parseFloat(U.electricity)||0,water:parseFloat(U.water)||0,natural_gas:parseFloat(U.natural_gas)||0,coal:parseFloat(U.coal)||0,accommodation_count:parseInt(U.accommodation_count)||0},"admin"===V&&U.client_id&&{client_id:U.client_id}),{headers:{Authorization:"Bearer ".concat(W)}}),H(),K(),T(!1),R(null),B({year:(new Date).getFullYear(),month:(new Date).getMonth()+1,electricity:"",water:"",natural_gas:"",coal:"",accommodation_count:""}),alert(z?"T\xfcketim verisi g\xfcncellendi!":"T\xfcketim verisi kaydedildi!")}catch(r){var t,n;console.error("Error saving consumption:",r),alert("Hata: "+((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.detail)||"Bilinmeyen hata"))}else alert("Oturum s\xfcresi dolmu\u015f. L\xfctfen sayfay\u0131 yenileyin.")},className:"p-6 space-y-4",children:["admin"===V&&(0,Gf.jsxs)("div",{children:[(0,Gf.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"M\xfc\u015fteri Se\xe7in"}),(0,Gf.jsxs)("select",{value:U.client_id||"",onChange:e=>B(d(d({},U),{},{client_id:e.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,Gf.jsx)("option",{value:"",children:"M\xfc\u015fteri se\xe7in..."}),(Array.isArray(M)?M:[]).map((e=>(0,Gf.jsx)("option",{value:e.id,children:e.hotel_name},e.id)))]})]}),(0,Gf.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Gf.jsxs)("div",{children:[(0,Gf.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Y\u0131l"}),(0,Gf.jsx)("select",{value:U.year,onChange:e=>B(d(d({},U),{},{year:e.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,children:[2025,2024,2023,2022,2021].map((e=>(0,Gf.jsx)("option",{value:e,children:e},e)))})]}),(0,Gf.jsxs)("div",{children:[(0,Gf.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Ay"}),(0,Gf.jsx)("select",{value:U.month,onChange:e=>B(d(d({},U),{},{month:e.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",required:!0,children:Array.from({length:12},((e,t)=>t+1)).map((e=>(0,Gf.jsx)("option",{value:e,children:Y(e)},e)))})]})]}),(0,Gf.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Gf.jsxs)("div",{children:[(0,Gf.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u26a1 Elektrik (kWh)"}),(0,Gf.jsx)("input",{type:"number",step:"0.01",value:U.electricity,onChange:e=>B(d(d({},U),{},{electricity:e.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]}),(0,Gf.jsxs)("div",{children:[(0,Gf.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\ud83d\udca7 Su (m\xb3)"}),(0,Gf.jsx)("input",{type:"number",step:"0.01",value:U.water,onChange:e=>B(d(d({},U),{},{water:e.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]})]}),(0,Gf.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Gf.jsxs)("div",{children:[(0,Gf.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\ud83d\udd25 Do\u011falgaz (m\xb3)"}),(0,Gf.jsx)("input",{type:"number",step:"0.01",value:U.natural_gas,onChange:e=>B(d(d({},U),{},{natural_gas:e.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]}),(0,Gf.jsxs)("div",{children:[(0,Gf.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\u26ab K\xf6m\xfcr (kg)"}),(0,Gf.jsx)("input",{type:"number",step:"0.01",value:U.coal,onChange:e=>B(d(d({},U),{},{coal:e.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"0.00"})]})]}),(0,Gf.jsxs)("div",{children:[(0,Gf.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\ud83c\udfe8 Konaklama Say\u0131s\u0131 (Ki\u015fi)"}),(0,Gf.jsx)("input",{type:"number",value:U.accommodation_count,onChange:e=>B(d(d({},U),{},{accommodation_count:e.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",placeholder:"0",required:!0})]}),(0,Gf.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,Gf.jsx)("button",{type:"submit",className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:z?"G\xfcncelle":"Kaydet"}),(0,Gf.jsx)("button",{type:"button",onClick:()=>{T(!1),R(null)},className:"bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition-colors",children:"\u0130ptal"})]})]})]})}),(0,Gf.jsxs)("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[(0,Gf.jsx)("div",{className:"bg-gray-50 px-6 py-4 border-b",children:(0,Gf.jsxs)("h3",{className:"text-lg font-semibold text-gray-800",children:["\ud83d\udcca ",I," Y\u0131l\u0131 T\xfcketim Verileri"]})}),(0,Gf.jsx)("div",{className:"overflow-x-auto",children:(0,Gf.jsxs)("table",{className:"w-full",children:[(0,Gf.jsx)("thead",{className:"bg-gray-100",children:(0,Gf.jsxs)("tr",{children:[(0,Gf.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Ay"}),(0,Gf.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u26a1 Elektrik"}),(0,Gf.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\ud83d\udca7 Su"}),(0,Gf.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\ud83d\udd25 Do\u011falgaz"}),(0,Gf.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u26ab K\xf6m\xfcr"}),(0,Gf.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\ud83c\udfe8 Konaklama"}),(0,Gf.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\u0130\u015flemler"})]})}),(0,Gf.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:[(Array.isArray(E)?E:[]).map((e=>(0,Gf.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,Gf.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap font-medium",children:[Y(e.month)," ",e.year]}),(0,Gf.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.electricity.toFixed(2)," kWh"]}),(0,Gf.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.water.toFixed(2)," m\xb3"]}),(0,Gf.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.natural_gas.toFixed(2)," m\xb3"]}),(0,Gf.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.coal.toFixed(2)," kg"]}),(0,Gf.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[e.accommodation_count," ki\u015fi"]}),(0,Gf.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,Gf.jsxs)("div",{className:"flex space-x-2",children:["admin"===V&&(0,Gf.jsxs)(Gf.Fragment,{children:[(0,Gf.jsx)("button",{onClick:()=>(e=>{R(e),B({year:e.year,month:e.month,electricity:e.electricity,water:e.water,natural_gas:e.natural_gas,coal:e.coal,accommodation_count:e.accommodation_count}),T(!0)})(e),className:"text-blue-600 hover:text-blue-900 font-medium",children:"\u270f\ufe0f D\xfczenle"}),(0,Gf.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Bu t\xfcketim verisini silmek istedi\u011finizden emin misiniz?"))try{console.log("\ud83d\uddd1\ufe0f Deleting consumption with ID:",e),console.log("\ud83d\udd11 Using token:",W?W.substring(0,20)+"...":"null"),console.log("\ud83c\udf10 API URL:","".concat(Xf,"/consumptions/").concat(e));const t=await Tt.delete("".concat(Xf,"/consumptions/").concat(e),{headers:{Authorization:"Bearer ".concat(W),"Content-Type":"application/json"}});console.log("\u2705 Delete response:",t.data),await H(),await K(),alert("\u2705 T\xfcketim verisi ba\u015far\u0131yla silindi!")}catch(a){var t,n,r,i;console.error("\u274c Error deleting consumption:",{status:null===(t=a.response)||void 0===t?void 0:t.status,data:null===(n=a.response)||void 0===n?void 0:n.data,message:a.message});const e=(null===(r=a.response)||void 0===r||null===(i=r.data)||void 0===i?void 0:i.detail)||a.message||"Bilinmeyen hata";alert("\u274c Silme hatas\u0131: ".concat(e))}})(e.id),className:"text-red-600 hover:text-red-900 font-medium",children:"\ud83d\uddd1\ufe0f Sil"})]}),"client"===V&&(0,Gf.jsx)("span",{className:"text-gray-500 text-sm",children:"Sadece g\xf6r\xfcnt\xfcleme"}),"client"===V&&(0,Gf.jsx)("span",{className:"text-gray-500 text-sm",children:"Sadece g\xf6r\xfcnt\xfcleme"})]})})]},e.id))),0===(Array.isArray(E)?E:[]).length&&(0,Gf.jsx)("tr",{children:(0,Gf.jsxs)("td",{colSpan:"7",className:"px-6 py-8 text-center text-gray-500",children:[I," y\u0131l\u0131 i\xe7in hen\xfcz t\xfcketim verisi girilmemi\u015f."]})})]})]})})]}),"admin"===V&&!U.client_id&&(0,Gf.jsxs)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 text-center",children:[(0,Gf.jsx)("h3",{className:"text-lg font-medium text-yellow-800 mb-2",children:"\ud83d\udcca Analiz i\xe7in M\xfc\u015fteri Se\xe7in"}),(0,Gf.jsx)("p",{className:"text-yellow-600 mb-3",children:"T\xfcketim analizlerini g\xf6r\xfcnt\xfclemek i\xe7in yukar\u0131dan bir m\xfc\u015fteri se\xe7in."}),(0,Gf.jsxs)("select",{value:U.client_id||"",onChange:e=>{B(d(d({},U),{},{client_id:e.target.value})),e.target.value?setTimeout((()=>{K(),H()}),100):(D(null),P([]))},className:"px-4 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500",children:[(0,Gf.jsx)("option",{value:"",children:"M\xfc\u015fteri se\xe7in..."}),(Array.isArray(M)?M:[]).map((e=>(0,Gf.jsx)("option",{value:e.id,children:e.hotel_name},e.id)))]})]}),L&&(0,Gf.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,Gf.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,Gf.jsxs)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:["\ud83d\udcc8 Ayl\u0131k Kar\u015f\u0131la\u015ft\u0131rma (",L.year," vs ",L.year-1,")"]}),(0,Gf.jsx)("div",{className:"space-y-4",children:((null===L||void 0===L?void 0:L.monthly_comparison)||[]).slice(0,6).map((e=>(0,Gf.jsxs)("div",{className:"border-b pb-3",children:[(0,Gf.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,Gf.jsx)("span",{className:"font-medium text-gray-700",children:e.month_name}),(0,Gf.jsxs)("span",{className:"text-sm text-gray-500",children:["Konaklama: ",e.current_year.accommodation_count," vs ",e.previous_year.accommodation_count]})]}),(0,Gf.jsxs)("div",{className:"grid grid-cols-4 gap-2 text-xs",children:[(0,Gf.jsxs)("div",{className:"text-center",children:[(0,Gf.jsxs)("div",{className:"text-blue-600 font-semibold",children:["\u26a1 ",e.current_year.electricity.toFixed(0)]}),(0,Gf.jsxs)("div",{className:"text-gray-400",children:["(",e.previous_year.electricity.toFixed(0),")"]})]}),(0,Gf.jsxs)("div",{className:"text-center",children:[(0,Gf.jsxs)("div",{className:"text-blue-600 font-semibold",children:["\ud83d\udca7 ",e.current_year.water.toFixed(0)]}),(0,Gf.jsxs)("div",{className:"text-gray-400",children:["(",e.previous_year.water.toFixed(0),")"]})]}),(0,Gf.jsxs)("div",{className:"text-center",children:[(0,Gf.jsxs)("div",{className:"text-orange-600 font-semibold",children:["\ud83d\udd25 ",e.current_year.natural_gas.toFixed(0)]}),(0,Gf.jsxs)("div",{className:"text-gray-400",children:["(",e.previous_year.natural_gas.toFixed(0),")"]})]}),(0,Gf.jsxs)("div",{className:"text-center",children:[(0,Gf.jsxs)("div",{className:"text-gray-800 font-semibold",children:["\u26ab ",e.current_year.coal.toFixed(0)]}),(0,Gf.jsxs)("div",{className:"text-gray-400",children:["(",e.previous_year.coal.toFixed(0),")"]})]})]})]},e.month)))})]}),(0,Gf.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,Gf.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"\ud83d\udc64 Ki\u015fi Ba\u015f\u0131 Y\u0131ll\u0131k Ortalama"}),(0,Gf.jsxs)("div",{className:"space-y-4",children:[(0,Gf.jsxs)("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 p-4 rounded-lg",children:[(0,Gf.jsxs)("h4",{className:"font-semibold text-gray-700 mb-3",children:[L.year," Y\u0131l\u0131"]}),(0,Gf.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Gf.jsxs)("div",{className:"text-center",children:[(0,Gf.jsxs)("div",{className:"text-2xl text-blue-600 font-bold",children:["\u26a1 ",(null===L||void 0===L||null===(t=L.yearly_per_person)||void 0===t||null===(n=t.current_year)||void 0===n||null===(r=n.electricity)||void 0===r?void 0:r.toFixed(1))||"0.0"]}),(0,Gf.jsx)("div",{className:"text-sm text-gray-600",children:"kWh/ki\u015fi"})]}),(0,Gf.jsxs)("div",{className:"text-center",children:[(0,Gf.jsxs)("div",{className:"text-2xl text-blue-500 font-bold",children:["\ud83d\udca7 ",(null===L||void 0===L||null===(i=L.yearly_per_person)||void 0===i||null===(s=i.current_year)||void 0===s||null===(o=s.water)||void 0===o?void 0:o.toFixed(1))||"0.0"]}),(0,Gf.jsx)("div",{className:"text-sm text-gray-600",children:"m\xb3/ki\u015fi"})]}),(0,Gf.jsxs)("div",{className:"text-center",children:[(0,Gf.jsxs)("div",{className:"text-2xl text-orange-600 font-bold",children:["\ud83d\udd25 ",(null===L||void 0===L||null===(l=L.yearly_per_person)||void 0===l||null===(c=l.current_year)||void 0===c||null===(u=c.natural_gas)||void 0===u?void 0:u.toFixed(1))||"0.0"]}),(0,Gf.jsx)("div",{className:"text-sm text-gray-600",children:"m\xb3/ki\u015fi"})]}),(0,Gf.jsxs)("div",{className:"text-center",children:[(0,Gf.jsxs)("div",{className:"text-2xl text-gray-800 font-bold",children:["\u26ab ",(null===L||void 0===L||null===(h=L.yearly_per_person)||void 0===h||null===(f=h.current_year)||void 0===f||null===(p=f.coal)||void 0===p?void 0:p.toFixed(1))||"0.0"]}),(0,Gf.jsx)("div",{className:"text-sm text-gray-600",children:"kg/ki\u015fi"})]})]})]}),(0,Gf.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Gf.jsxs)("h4",{className:"font-semibold text-gray-700 mb-3",children:[(null===L||void 0===L?void 0:L.year)-1||2023," Y\u0131l\u0131 (Kar\u015f\u0131la\u015ft\u0131rma)"]}),(0,Gf.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,Gf.jsxs)("div",{className:"text-center",children:[(0,Gf.jsxs)("div",{className:"text-xl text-gray-600 font-semibold",children:["\u26a1 ",(null===L||void 0===L||null===(m=L.yearly_per_person)||void 0===m||null===(g=m.previous_year)||void 0===g||null===(b=g.electricity)||void 0===b?void 0:b.toFixed(1))||"0.0"]}),(0,Gf.jsx)("div",{className:"text-xs text-gray-500",children:"kWh/ki\u015fi"})]}),(0,Gf.jsxs)("div",{className:"text-center",children:[(0,Gf.jsxs)("div",{className:"text-xl text-gray-600 font-semibold",children:["\ud83d\udca7 ",(null===L||void 0===L||null===(y=L.yearly_per_person)||void 0===y||null===(v=y.previous_year)||void 0===v||null===(x=v.water)||void 0===x?void 0:x.toFixed(1))||"0.0"]}),(0,Gf.jsx)("div",{className:"text-xs text-gray-500",children:"m\xb3/ki\u015fi"})]}),(0,Gf.jsxs)("div",{className:"text-center",children:[(0,Gf.jsxs)("div",{className:"text-xl text-gray-600 font-semibold",children:["\ud83d\udd25 ",(null===L||void 0===L||null===(k=L.yearly_per_person)||void 0===k||null===(w=k.previous_year)||void 0===w||null===(_=w.natural_gas)||void 0===_?void 0:_.toFixed(1))||"0.0"]}),(0,Gf.jsx)("div",{className:"text-xs text-gray-500",children:"m\xb3/ki\u015fi"})]}),(0,Gf.jsxs)("div",{className:"text-center",children:[(0,Gf.jsxs)("div",{className:"text-xl text-gray-600 font-semibold",children:["\u26ab ",(null===L||void 0===L||null===(S=L.yearly_per_person)||void 0===S||null===(j=S.previous_year)||void 0===j||null===(N=j.coal)||void 0===N?void 0:N.toFixed(1))||"0.0"]}),(0,Gf.jsx)("div",{className:"text-xs text-gray-500",children:"kg/ki\u015fi"})]})]})]})]})]})]})]})},ap=e=>{let{client:t,onNavigate:n}=e;const[r,i]=(0,a.useState)([]),[s,o]=(0,a.useState)([]),[l,c]=(0,a.useState)(!1),[u,h]=(0,a.useState)(!1),[f,p]=(0,a.useState)({title:"",description:"",training_date:"",participants:""}),[m,g]=(0,a.useState)({report_file:null,total_emissions:"",calculation_date:"",notes:""}),[b,y]=(0,a.useState)(null),[v,x]=(0,a.useState)(!1),{authToken:k,userRole:w}=Jf();(0,a.useEffect)((()=>{t&&k&&(_(),S())}),[t,k]);const _=async()=>{try{const e=await Tt.get("".concat(Xf,"/trainings/").concat(t.id),{headers:{Authorization:"Bearer ".concat(k)}});i(e.data)}catch(e){console.error("Error fetching trainings:",e)}},S=async()=>{try{const e=await Tt.get("".concat(Xf,"/documents/").concat(t.id),{headers:{Authorization:"Bearer ".concat(k)}});o(e.data)}catch(e){console.error("Error fetching documents:",e)}},j=e=>{y(e),x(!0)},N=e=>{switch(e.split(".").pop().toLowerCase()){case"pdf":return"\ud83d\udcc4";case"doc":case"docx":return"\ud83d\udcdd";case"xls":case"xlsx":return"\ud83d\udcca";case"jpg":case"jpeg":case"png":return"\ud83d\uddbc\ufe0f";case"zip":case"rar":return"\ud83d\udce6";default:return"\ud83d\udccb"}};return t?(0,Gf.jsxs)("div",{className:"space-y-6",children:[(0,Gf.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Gf.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,Gf.jsxs)("h2",{className:"text-2xl font-bold text-gray-800",children:["Proje Y\xf6netimi - ",t.hotel_name]}),(0,Gf.jsx)("button",{onClick:()=>n("admin"===w?"clients":"dashboard"),className:"bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700 transition-colors",children:"Geri D\xf6n"})]}),(0,Gf.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[(0,Gf.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,Gf.jsx)("h3",{className:"font-semibold text-blue-800",children:"M\xfc\u015fteri Bilgileri"}),(0,Gf.jsxs)("p",{children:[(0,Gf.jsx)("strong",{children:"Firma:"})," ",t.name]}),(0,Gf.jsxs)("p",{children:[(0,Gf.jsx)("strong",{children:"Otel:"})," ",t.hotel_name]}),(0,Gf.jsxs)("p",{children:[(0,Gf.jsx)("strong",{children:"\u0130leti\u015fim:"})," ",t.contact_person]}),(0,Gf.jsxs)("p",{children:[(0,Gf.jsx)("strong",{children:"A\u015fama:"})," ",t.current_stage]})]}),(0,Gf.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,Gf.jsx)("h3",{className:"font-semibold text-green-800",children:"Karbon Ayak \u0130zi"}),(0,Gf.jsx)("p",{className:"text-2xl font-bold text-green-600",children:t.carbon_footprint?"".concat(t.carbon_footprint.toFixed(2)," kg CO2"):"Rapor Y\xfcklenmedi"}),"admin"===w&&(0,Gf.jsx)("button",{onClick:()=>h(!0),className:"mt-2 bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700 transition-colors",children:"Rapor Y\xfckle"}),"client"===w&&t.carbon_footprint&&(0,Gf.jsx)("p",{className:"text-xs text-green-600 mt-1",children:"\ud83d\udcca Karbon ayak izi hesaplamas\u0131 tamamland\u0131"}),"client"===w&&!t.carbon_footprint&&(0,Gf.jsx)("p",{className:"text-xs text-green-600 mt-1",children:"\u23f3 Karbon ayak izi analizi devam ediyor"})]}),(0,Gf.jsxs)("div",{className:"bg-purple-50 p-4 rounded-lg",children:[(0,Gf.jsx)("h3",{className:"font-semibold text-purple-800",children:"Belgeler"}),(0,Gf.jsx)("p",{className:"text-2xl font-bold text-purple-600",children:s.length}),(0,Gf.jsx)("p",{className:"text-sm text-purple-600",children:"Y\xfcklenen belge"})]})]}),(0,Gf.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,Gf.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Gf.jsx)("h3",{className:"font-semibold text-gray-800 mb-3",children:"Hizmet Durumu"}),(0,Gf.jsx)("div",{className:"space-y-2",children:["Mevcut durum analizi","\xc7al\u0131\u015fma ekibinin belirlenmesi","Proje plan\u0131n\u0131n olu\u015fturulmas\u0131","Risk de\u011ferlendirmesi","E\u011fitim-Bilin\xe7lendirme faaliyetleri","\u0130zleme, Denetim Kay\u0131tlar\u0131n\u0131n Olu\u015fturulmas\u0131 ve \u0130yile\u015ftirme faaliyetleri","Belgelendirme denetimi"].map(((e,n)=>{var r,i;return(0,Gf.jsxs)("div",{className:"flex items-center",children:[(0,Gf.jsx)("input",{type:"checkbox",checked:(null===(r=t.services_completed)||void 0===r?void 0:r.includes(e))||!1,readOnly:!0,className:"mr-2"}),(0,Gf.jsx)("span",{className:"text-sm ".concat(null!==(i=t.services_completed)&&void 0!==i&&i.includes(e)?"text-green-600 font-semibold":"text-gray-600"),children:e})]},n)}))})]}),(0,Gf.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,Gf.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,Gf.jsx)("h3",{className:"font-semibold text-gray-800",children:"E\u011fitimler"}),"admin"===w&&(0,Gf.jsx)("button",{onClick:()=>c(!0),className:"bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 transition-colors",children:"Yeni E\u011fitim"})]}),(0,Gf.jsx)("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:(r||[]).map((e=>(0,Gf.jsx)("div",{className:"border-l-4 border-blue-400 pl-3 py-2 bg-white rounded",children:(0,Gf.jsxs)("div",{className:"flex justify-between items-start",children:[(0,Gf.jsxs)("div",{children:[(0,Gf.jsx)("h4",{className:"font-semibold text-sm",children:e.title}),(0,Gf.jsx)("p",{className:"text-xs text-gray-600",children:e.description}),(0,Gf.jsxs)("p",{className:"text-xs text-gray-500",children:[new Date(e.training_date).toLocaleDateString("tr-TR")," - ",e.participants," ki\u015fi"]})]}),"admin"===w&&(0,Gf.jsxs)("select",{value:e.status,onChange:t=>(async(e,t)=>{try{await Tt.put("".concat(Xf,"/trainings/").concat(e,"?status=").concat(t),{},{headers:{Authorization:"Bearer ".concat(k)}}),_()}catch(n){console.error("Error updating training status:",n)}})(e.id,t.target.value),className:"text-xs border rounded px-1 py-1",children:[(0,Gf.jsx)("option",{value:"Planned",children:"Planland\u0131"}),(0,Gf.jsx)("option",{value:"Completed",children:"Tamamland\u0131"}),(0,Gf.jsx)("option",{value:"Cancelled",children:"\u0130ptal"})]})]})},e.id)))})]})]}),(0,Gf.jsxs)("div",{className:"mt-6 bg-gray-50 p-4 rounded-lg",children:[(0,Gf.jsx)("h3",{className:"font-semibold text-gray-800 mb-3",children:"admin"===w?"Belgeler":"Belgelerim"}),"client"===w&&(0,Gf.jsxs)("div",{className:"mb-4",children:[(0,Gf.jsx)("h4",{className:"font-medium text-gray-700 mb-2 flex items-center",children:"\ud83c\udf31 Karbon Ayak \u0130zi Raporlar\u0131m"}),(0,Gf.jsx)("div",{className:"bg-white p-3 rounded border",children:t.carbon_footprint?(0,Gf.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Gf.jsxs)("div",{children:[(0,Gf.jsxs)("p",{className:"font-semibold text-green-800",children:["Karbon Ayak \u0130zi: ",t.carbon_footprint.toFixed(2)," kg CO2"]}),(0,Gf.jsx)("p",{className:"text-sm text-gray-600",children:"\ud83d\udcc4 Detayl\u0131 rapor y\xfcklenmi\u015ftir"})]}),(0,Gf.jsx)("button",{onClick:()=>{const e=s.find((e=>"Karbon Ayak \u0130zi Raporu"===e.document_type));e?j(e):alert("Karbon ayak izi raporu hen\xfcz y\xfcklenmemi\u015f.")},className:"bg-green-600 text-white px-3 py-1 rounded text-sm hover:bg-green-700 transition-colors",children:"\ud83d\udcca Raporu G\xf6r\xfcnt\xfcle"})]}):(0,Gf.jsx)("div",{className:"text-center py-4",children:(0,Gf.jsx)("span",{className:"text-gray-500",children:"\u23f3 Karbon ayak izi analizi hen\xfcz tamamlanmad\u0131"})})})]}),(0,Gf.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(s||[]).map((e=>(0,Gf.jsx)("div",{className:"bg-white p-3 rounded border hover:shadow-md transition-shadow",children:(0,Gf.jsxs)("div",{className:"flex items-start justify-between",children:[(0,Gf.jsxs)("div",{className:"flex-1",children:[(0,Gf.jsxs)("div",{className:"flex items-center mb-2",children:[(0,Gf.jsx)("span",{className:"text-lg mr-2",children:N(e.file_path)}),(0,Gf.jsx)("h4",{className:"font-semibold text-sm text-gray-800 truncate",children:e.name})]}),(0,Gf.jsx)("p",{className:"text-xs text-gray-600 mb-1",children:e.document_type}),(0,Gf.jsx)("p",{className:"text-xs text-gray-500",children:e.stage}),(0,Gf.jsx)("p",{className:"text-xs text-gray-500",children:new Date(e.created_at).toLocaleDateString("tr-TR")})]}),(0,Gf.jsx)("button",{onClick:()=>j(e),className:"text-blue-600 hover:text-blue-900 text-sm ml-2",children:"\ud83d\udccb"})]})},e.id))),0===s.length&&(0,Gf.jsx)("div",{className:"col-span-full text-center py-8 text-gray-500",children:"admin"===w?"Hen\xfcz belge y\xfcklenmemi\u015f.":"Hen\xfcz size ait belge bulunmuyor."})]})]})]}),u&&"admin"===w&&(0,Gf.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Gf.jsxs)("div",{className:"bg-white p-6 rounded-lg w-full max-w-md",children:[(0,Gf.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Karbon Ayak \u0130zi Raporu Y\xfckleme"}),(0,Gf.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e={client_id:t.id,name:"Karbon Ayak \u0130zi Raporu",document_type:"Karbon Ayak \u0130zi Raporu",stage:t.current_stage,file_path:"/reports/carbon_".concat(t.id,"_").concat(Date.now(),".pdf"),file_size:m.report_file?m.report_file.size:0};await Tt.post("".concat(Xf,"/documents"),e,{headers:{Authorization:"Bearer ".concat(k)}}),m.total_emissions&&await Tt.put("".concat(Xf,"/clients/").concat(t.id),{carbon_footprint:parseFloat(m.total_emissions)},{headers:{Authorization:"Bearer ".concat(k)}}),h(!1),g({report_file:null,total_emissions:"",calculation_date:"",notes:""}),S(),alert("Karbon ayak izi raporu ba\u015far\u0131yla y\xfcklendi!")}catch(n){console.error("Error uploading carbon report:",n),alert("Rapor y\xfcklenirken hata olu\u015ftu!")}},className:"space-y-4",children:[(0,Gf.jsx)("input",{type:"file",accept:".pdf,.doc,.docx",onChange:e=>g(d(d({},m),{},{report_file:e.target.files[0]})),className:"w-full p-3 border border-gray-300 rounded-md"}),(0,Gf.jsx)("input",{type:"number",step:"0.01",placeholder:"Toplam Emisyon (kg CO2)",value:m.total_emissions,onChange:e=>g(d(d({},m),{},{total_emissions:e.target.value})),className:"w-full p-3 border border-gray-300 rounded-md",required:!0}),(0,Gf.jsx)("input",{type:"date",value:m.calculation_date,onChange:e=>g(d(d({},m),{},{calculation_date:e.target.value})),className:"w-full p-3 border border-gray-300 rounded-md",required:!0}),(0,Gf.jsx)("textarea",{placeholder:"Notlar",value:m.notes,onChange:e=>g(d(d({},m),{},{notes:e.target.value})),className:"w-full p-3 border border-gray-300 rounded-md",rows:"3"}),(0,Gf.jsxs)("div",{className:"flex space-x-3",children:[(0,Gf.jsx)("button",{type:"submit",className:"flex-1 bg-green-600 text-white py-2 rounded-md hover:bg-green-700 transition-colors",children:"Y\xfckle"}),(0,Gf.jsx)("button",{type:"button",onClick:()=>h(!1),className:"flex-1 bg-gray-500 text-white py-2 rounded-md hover:bg-gray-600 transition-colors",children:"\u0130ptal"})]})]})]})}),l&&"admin"===w&&(0,Gf.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,Gf.jsxs)("div",{className:"bg-white p-6 rounded-lg w-full max-w-md",children:[(0,Gf.jsx)("h3",{className:"text-lg font-semibold mb-4",children:"Yeni E\u011fitim Ekle"}),(0,Gf.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e={client_id:t.id,title:f.title,description:f.description,training_date:new Date(f.training_date).toISOString(),participants:parseInt(f.participants)};await Tt.post("".concat(Xf,"/trainings"),e,{headers:{Authorization:"Bearer ".concat(k)}}),_(),c(!1),p({title:"",description:"",training_date:"",participants:""})}catch(n){console.error("Error creating training:",n)}},className:"space-y-4",children:[(0,Gf.jsx)("input",{type:"text",placeholder:"E\u011fitim Ba\u015fl\u0131\u011f\u0131",value:f.title,onChange:e=>p(d(d({},f),{},{title:e.target.value})),className:"w-full p-3 border border-gray-300 rounded-md",required:!0}),(0,Gf.jsx)("textarea",{placeholder:"E\u011fitim A\xe7\u0131klamas\u0131",value:f.description,onChange:e=>p(d(d({},f),{},{description:e.target.value})),className:"w-full p-3 border border-gray-300 rounded-md",rows:"3",required:!0}),(0,Gf.jsx)("input",{type:"datetime-local",value:f.training_date,onChange:e=>p(d(d({},f),{},{training_date:e.target.value})),className:"w-full p-3 border border-gray-300 rounded-md",required:!0}),(0,Gf.jsx)("input",{type:"number",placeholder:"Kat\u0131l\u0131mc\u0131 Say\u0131s\u0131",value:f.participants,onChange:e=>p(d(d({},f),{},{participants:e.target.value})),className:"w-full p-3 border border-gray-300 rounded-md",required:!0}),(0,Gf.jsxs)("div",{className:"flex space-x-3",children:[(0,Gf.jsx)("button",{type:"submit",className:"flex-1 bg-blue-600 text-white py-2 rounded-md hover:bg-blue-700 transition-colors",children:"Kaydet"}),(0,Gf.jsx)("button",{type:"button",onClick:()=>c(!1),className:"flex-1 bg-gray-500 text-white py-2 rounded-md hover:bg-gray-600 transition-colors",children:"\u0130ptal"})]})]})]})})]}):(0,Gf.jsxs)("div",{className:"text-center py-8",children:[(0,Gf.jsx)("p",{className:"text-gray-600",children:"L\xfctfen bir m\xfc\u015fteri se\xe7in."}),(0,Gf.jsx)("button",{onClick:()=>n("clients"),className:"mt-4 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors",children:"M\xfc\u015fteri Listesine D\xf6n"})]})},sp=e=>{var t;let{onComplete:n,onSkip:r}=e;const[i,s]=(0,a.useState)({name:"",hotel_name:"",contact_person:"",email:"",phone:"",address:""}),[o,l]=(0,a.useState)(!1),{user:c,authToken:u,refreshUser:h}=Jf();return(0,Gf.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center p-6",children:(0,Gf.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-md p-6",children:[(0,Gf.jsxs)("div",{className:"text-center mb-6",children:[(0,Gf.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"\ud83c\udfe8 Otel Bilgilerinizi Tamamlay\u0131n"}),(0,Gf.jsx)("p",{className:"text-gray-600 mt-2",children:"S\xfcrd\xfcr\xfclebilir turizm yolculu\u011funuza ba\u015flamak i\xe7in otel bilgilerinizi girin."})]}),(0,Gf.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),l(!0);try{var t;const e=await Tt.post("".concat(Xf,"/clients"),d(d({},i),{},{email:(null===(t=c.primaryEmailAddress)||void 0===t?void 0:t.emailAddress)||i.email}),{headers:{Authorization:"Bearer ".concat(u)}});await Tt.put("".concat(Xf,"/auth/me"),{client_id:e.data.id},{headers:{Authorization:"Bearer ".concat(u)}}),await h(),alert("Otel bilgileriniz ba\u015far\u0131yla kaydedildi! Sistemi kullanmaya ba\u015flayabilirsiniz."),n()}catch(s){var r,a;console.error("Client setup error:",s),alert("Hata olu\u015ftu: "+((null===(r=s.response)||void 0===r||null===(a=r.data)||void 0===a?void 0:a.detail)||"Bilinmeyen hata"))}finally{l(!1)}},className:"space-y-4",children:[(0,Gf.jsxs)("div",{children:[(0,Gf.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Firma Ad\u0131 ",(0,Gf.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Gf.jsx)("input",{type:"text",placeholder:"\xd6rn: Antalya Turizm A.\u015e.",value:i.name,onChange:e=>s(d(d({},i),{},{name:e.target.value})),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,Gf.jsxs)("div",{children:[(0,Gf.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Otel/Tesis Ad\u0131 ",(0,Gf.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Gf.jsx)("input",{type:"text",placeholder:"\xd6rn: Grand Resort & Spa",value:i.hotel_name,onChange:e=>s(d(d({},i),{},{hotel_name:e.target.value})),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,Gf.jsxs)("div",{children:[(0,Gf.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["\u0130leti\u015fim Ki\u015fisi ",(0,Gf.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Gf.jsx)("input",{type:"text",placeholder:"\xd6rn: Ahmet Y\u0131lmaz",value:i.contact_person,onChange:e=>s(d(d({},i),{},{contact_person:e.target.value})),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,Gf.jsxs)("div",{children:[(0,Gf.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["E-posta ",(0,Gf.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Gf.jsx)("input",{type:"email",placeholder:"\xd6rn: info@grandresort.com",value:i.email||(null===c||void 0===c||null===(t=c.primaryEmailAddress)||void 0===t?void 0:t.emailAddress)||"",onChange:e=>s(d(d({},i),{},{email:e.target.value})),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,Gf.jsxs)("div",{children:[(0,Gf.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Telefon ",(0,Gf.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Gf.jsx)("input",{type:"tel",placeholder:"\xd6rn: +90 242 123 4567",value:i.phone,onChange:e=>s(d(d({},i),{},{phone:e.target.value})),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,Gf.jsxs)("div",{children:[(0,Gf.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["Adres ",(0,Gf.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,Gf.jsx)("textarea",{placeholder:"Tam adresinizi girin...",value:i.address,onChange:e=>s(d(d({},i),{},{address:e.target.value})),className:"w-full p-3 border border-gray-300 rounded-md focus:ring-2 focus:ring-blue-500 focus:border-blue-500",rows:"3",required:!0})]}),(0,Gf.jsx)("button",{type:"submit",disabled:o,className:"w-full bg-blue-600 text-white py-3 px-4 rounded-md hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:o?(0,Gf.jsxs)("div",{className:"flex items-center justify-center",children:[(0,Gf.jsx)("div",{className:"animate-spin h-5 w-5 border-2 border-white border-t-transparent rounded-full mr-2"}),"Kaydediliyor..."]}):"Otel Bilgilerini Kaydet"}),(0,Gf.jsx)("button",{type:"button",onClick:r,className:"w-full bg-gray-500 text-white py-2 px-4 rounded-md hover:bg-gray-600 transition-colors mt-2",children:"\u015eimdilik Atla (Sonra Tamamlayabilirim)"})]}),(0,Gf.jsx)("div",{className:"mt-6 text-center",children:(0,Gf.jsx)("p",{className:"text-xs text-gray-500",children:"Bu bilgiler s\xfcrd\xfcr\xfclebilirlik dan\u0131\u015fmanl\u0131\u011f\u0131 s\xfcrecinde kullan\u0131lacakt\u0131r."})})]})})},op=e=>{let{activeTab:t,onNavigate:n,userRole:r}=e;const i="admin"===r?[{id:"dashboard",name:"Dashboard",icon:"\ud83d\udcca"},{id:"clients",name:"M\xfc\u015fteri Y\xf6netimi",icon:"\ud83c\udfe8"},{id:"consumption",name:"T\xfcketim Y\xf6netimi",icon:"\u26a1"},{id:"analytics",name:"T\xfcketim Analizi",icon:"\ud83d\udcc8"},{id:"documents",name:"Belge Y\xf6netimi",icon:"\ud83d\udccb"},{id:"reports",name:"Raporlar",icon:"\ud83d\udcc4"}]:[{id:"dashboard",name:"Dashboard",icon:"\ud83d\udcca"},{id:"consumption",name:"T\xfcketim Takibi",icon:"\u26a1"},{id:"analytics",name:"T\xfcketim Analizi",icon:"\ud83d\udcc8"},{id:"documents",name:"Belgelerim",icon:"\ud83d\udccb"},{id:"trainings",name:"E\u011fitimlerim",icon:"\ud83c\udf93"}];return(0,Gf.jsxs)("div",{className:"bg-gray-800 text-white w-64 min-h-screen p-4",children:[(0,Gf.jsxs)("div",{className:"mb-8",children:[(0,Gf.jsx)("h1",{className:"text-xl font-bold",children:"\ud83c\udf3f S\xfcrd\xfcr\xfclebilir Turizm CRM"}),(0,Gf.jsx)("p",{className:"text-sm text-gray-300",children:"admin"===r?"Admin Paneli":"M\xfc\u015fteri Paneli"})]}),(0,Gf.jsx)("nav",{className:"space-y-2",children:i.map((e=>(0,Gf.jsxs)("button",{onClick:()=>n(e.id),className:"w-full text-left px-4 py-3 rounded-lg transition-colors ".concat(t===e.id?"bg-blue-600 text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"),children:[(0,Gf.jsx)("span",{className:"mr-3",children:e.icon}),e.name]},e.id)))})]})},lp=()=>{const[e,t]=(0,a.useState)("dashboard"),[n,r]=(0,a.useState)(null),[i,s]=(0,a.useState)(!1),{userRole:o,isLoaded:l,dbUser:c,refreshUser:u}=Jf();(0,a.useEffect)((()=>{if(l&&"client"===o){const e=localStorage.getItem("client_setup_".concat(o,"_completed"));e||null!==c&&void 0!==c&&c.client_id&&""!==(null===c||void 0===c?void 0:c.client_id)?(s(!1),!e||null!==c&&void 0!==c&&c.client_id||u()):s(!0)}}),[l,o,c,u]);const d=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t(e),r(n)},h=async()=>{try{localStorage.setItem("client_setup_".concat(o,"_completed"),"true"),await u(),s(!1),console.log("\u2705 Client setup completed and marked as done")}catch(e){console.error("Setup completion error:",e)}},f=()=>{localStorage.setItem("client_setup_".concat(o,"_completed"),"true"),s(!1)};if(!l)return(0,Gf.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,Gf.jsxs)("div",{className:"text-center",children:[(0,Gf.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-600 mx-auto"}),(0,Gf.jsx)("p",{className:"mt-4 text-gray-600",children:"Y\xfckleniyor..."})]})});if(i&&"client"===o)return(0,Gf.jsx)(sp,{onComplete:h,onSkip:f});return(0,Gf.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,Gf.jsx)(Zf,{}),(0,Gf.jsxs)("div",{className:"flex",children:[(0,Gf.jsx)(op,{activeTab:e,onNavigate:d,userRole:o}),(0,Gf.jsx)("div",{className:"flex-1 p-6",children:(()=>{switch(e){case"dashboard":default:return(0,Gf.jsx)(tp,{onNavigate:d});case"clients":return(0,Gf.jsx)(np,{onNavigate:d});case"consumption":return(0,Gf.jsx)(ip,{onNavigate:d});case"analytics":return(0,Gf.jsx)(ep,{});case"project":return(0,Gf.jsx)(ap,{client:n,onNavigate:d});case"documents":return(0,Gf.jsx)(rp,{});case"reports":return(0,Gf.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Gf.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Raporlar"}),(0,Gf.jsx)("p",{className:"text-gray-600",children:"Yak\u0131nda eklenecek..."})]});case"trainings":return(0,Gf.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,Gf.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"E\u011fitimlerim"}),(0,Gf.jsx)("p",{className:"text-gray-600",children:"Yak\u0131nda eklenecek..."})]})}})()})]})]})};const cp=function(){return(0,Gf.jsxs)(Ls,{publishableKey:Qf,children:[(0,Gf.jsx)(Oi,{children:(0,Gf.jsx)(lp,{})}),(0,Gf.jsx)(Ai,{children:(0,Gf.jsx)(Ti,{})})]})};s.createRoot(document.getElementById("root")).render((0,Gf.jsx)(a.StrictMode,{children:(0,Gf.jsx)(cp,{})}))})();
//# sourceMappingURL=main.0bae8250.js.map